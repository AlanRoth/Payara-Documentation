<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configurable JDK Versions for JVM Options :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="JVM%20Options.html">Configurable JDK Versions for JVM Options</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/Configuration%20Options/JVM%20Options.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Configurable JDK Versions for JVM Options</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>Since Payara Server 5.182</em></p>
</div>
<div class="paragraph">
<p>It is possible to allow specific JVM options configured for a Payara Server Community instance to be applied only on specific JDK versions. The configuration is flexible since it allows the user to define minimum and maximum versions of all JDKs upon which each JVM option should be applied.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If no minimum and/or maximum JDK versions are set for a particular JVM option, it shall be applied no matter which JDK is being used to run the server&#8217;s instance (which is the default behaviour).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="versioning-syntax"><a class="anchor" href="#versioning-syntax"></a>Versioning Syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JDK versions must follow standard the standard JDK versioning scheme (<code>1.$MAJOR.$MINOR.$UPDATE</code>). The syntax that can be used is a bit flexible, allowing the following variants to be correctly interpreted:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>1.8.0.162</code></p>
</li>
<li>
<p><code>1.8.0u162</code></p>
</li>
<li>
<p><code>1.8.0</code></p>
</li>
<li>
<p><code>1.8</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-jdk-versions"><a class="anchor" href="#configuring-jdk-versions"></a>Configuring JDK Versions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JDK Versions for JVM Options can be configured in three different ways: Using the admin console or running asadmin commands from a console terminal.</p>
</div>
<div class="sect2">
<h3 id="using-admin-console"><a class="anchor" href="#using-admin-console"></a>Using the Admin Console</h3>
<div class="paragraph">
<p>To configure the JDK versions for JVM options in the admin console, head to the <strong>Configurations &#8594; &lt;instance configuration&gt; &#8594; JVM Settings</strong> and on the <strong>JVM Options</strong> tab specify the versions in the table:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/jvm-options/configure-jdk-versions-admin-console.png" alt="Configure JDK versions for JVM options in Admin console">
</div>
</div>
<div class="paragraph">
<p>You can omit either the minimum or maximum versions by leaving the fields blank.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-asadmin-commands"><a class="anchor" href="#using-asadmin-commands"></a>Using Asadmin commands</h3>
<div class="paragraph">
<p>JVM options can be configured using the 'create-jvm-options' asadmin command. The jvm option key value pair must be enclosed in quotation marks as follows: <code><em>asadmin create-jvm-options --target=server-config "-Djava.awt.headless\=true"</em></code></p>
</div>
<div class="paragraph">
<p>The <code>create-jvm-options</code> asadmin command has been modified to set the miminum and maximum JDK versions in the following ways:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the <code>--min-jvm</code> and <code>--max-jvm</code> arguments to set the versions when running the command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin create-jvm-options --target=server-config --min-jvm=1.8.0u162 "-Djava.awt.headless\=true"

asadmin create-jvm-options --target=server-config --max-jvm=1.8.0u172 "-XX\:+UnlockDiagnosticVMOptions"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When using these arguments to set multiple JVM options, the specified versions will be applied for each option.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Specify the versions using the <code>[MIN_VERSION | MAX_VERSION]</code> text syntax for the inclusive version range before each JVM option:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin create-jvm-options --target=server-config "[1.8.0u162|]-Djava.awt.headless\=true"

asadmin create-jvm-options --target=server-config "[|1.8.0u172]-XX\:+UnlockDiagnosticVMOptions"

asadmin create-jvm-options --target=server-config "[1.8.0u168|1.8.0u172]-XX\:NewRatio\=2"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify the range for each JVM option when specifying multiple options too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin create-jvm-options --target=server-config "-Djava.awt.headless\=true:[|1.8.0u172]-XX\:+UnlockDiagnosticVMOptions:[1.8.0u168|1.8.0u172]-XX\:NewRatio\=2"</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="multimode-double-escaping"><a class="anchor" href="#multimode-double-escaping"></a>Multimode double escaping</h3>
<div class="paragraph">
<p><em>Since Payara Server 5.193</em></p>
</div>
<div class="paragraph">
<p>When creating JVM options in the multimode of asadmin, you need to perform a <em>double</em> escaping of the values.</p>
</div>
<div class="paragraph">
<p>So first, start up <em>asadmin</em> in multimode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin</code></pre>
</div>
</div>
<div class="paragraph">
<p>Execute the <em>create_jvm_options</em> but perform a double escaping of the special characters. Otherwise, the command fails with the error "JVM option &#8230;&#8203; is invalid because it does not start with a '-'".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; create-jvm-options "-XX\\:MaxPermSize=512m"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deleting-jvm-options"><a class="anchor" href="#deleting-jvm-options"></a>Deleting JVM Options</h3>
<div class="paragraph">
<p>Deleting JVM options is done using either the Admin Console, or the <code>delete-jvm-options</code> asadmin command. It is not
required for you to specify the JDK version braces for deleting a JVM option, though you can if you wish.</p>
</div>
<div class="paragraph">
<p>For example, given the option "[1.8.0.160|1.8.0.200]XX\:NewRatio=3", either of the following will work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; delete-jvm-options "XX\:NewRatio=3"
asadmin&gt; delete-jvm-options "[1.8.0.160|1.8.0.200]XX\:NewRatio=3"</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
