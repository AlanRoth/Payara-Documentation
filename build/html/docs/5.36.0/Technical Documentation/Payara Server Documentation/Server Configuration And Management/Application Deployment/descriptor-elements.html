<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Elements of the Deployment Descriptor Files :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="descriptor-elements.html">Elements of the Deployment Descriptor Files</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/ondro-poc/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/Application%20Deployment/descriptor-elements.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Elements of the Deployment Descriptor Files</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#classloading-delegate"><code>classloading-delegate</code></a></li>
<li><a href="#clustered-attach-postconstruct"><code>clustered-attach-postconstruct</code></a></li>
<li><a href="#clustered-bean"><code>clustered-bean</code></a></li>
<li><a href="#clustered-detach-predestroy"><code>clustered-detach-predestroy</code></a></li>
<li><a href="#clustered-key-name"><code>clustered-key-name</code></a></li>
<li><a href="#clustered-lock-type"><code>clustered-lock-type</code></a></li>
<li><a href="#whitelist-package"><code>whitelist-package</code></a></li>
<li><a href="#enable-implicit-cdi"><code>enable-implicit-cdi</code></a></li>
<li><a href="#scanning-exclude-and-scanning-include"><code>scanning-exclude</code> and <code>scanning-include</code></a></li>
<li><a href="#container-initializer-enabled"><code>container-initializer-enabled</code></a></li>
<li><a href="#default-role-mapping"><code>default-role-mapping</code></a></li>
<li><a href="#jaxrs-roles-allowed-enabled"><code>jaxrs-roles-allowed-enabled</code></a></li>
<li><a href="#max-wait-time-in-millis"><code>max-wait-time-in-millis</code></a></li>
<li><a href="#webservice-default-login-config"><code>webservice-default-login-config</code></a></li>
<li><a href="#jsp-config"><code>jsp-config</code></a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This page is a reference for extra and changed elements added to the GlassFish proprietary
deployment descriptors</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="classloading-delegate"><a class="anchor" href="#classloading-delegate"></a><code>classloading-delegate</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>With this option its possible to enable/disable <strong>class loading delegation</strong>.
This allows deployed application to use libraries included on them,
overriding the versions included on the server.</p>
</div>
<div class="paragraph">
<p>For more information about how class delegation can be configured on
Payara Server Community, see the
<a href="#/documentation/payara-server/classloading.adoc" class="page unresolved">Enhanced Class loading</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clustered-attach-postconstruct"><a class="anchor" href="#clustered-attach-postconstruct"></a><code>clustered-attach-postconstruct</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whether to call <code>@PostConstruct</code> each time the bean is created
on a different node. Will result in multiple calls.</p>
</div>
<div class="paragraph">
<p>Valid values are <code>true</code> or <code>false</code>. The default value is <code>true</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clustered-bean"><a class="anchor" href="#clustered-bean"></a><code>clustered-bean</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whether this bean should be a <a href="#/documentation/payara-server/public-api/clustered-singleton.adoc" class="page unresolved">Clustered Singleton</a>. Can be applied only to singleton EJBs.</p>
</div>
<div class="paragraph">
<p>Valid values are <code>true</code> or <code>false</code>. The default value is <code>false</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clustered-detach-predestroy"><a class="anchor" href="#clustered-detach-predestroy"></a><code>clustered-detach-predestroy</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whether to call <code>@PreDestroy</code> when the singleton is destroyed on an
instance while still being available on another. Will result in
multiple calls.</p>
</div>
<div class="paragraph">
<p>Valid values are <code>true</code> or <code>false</code>. The default value is <code>true</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clustered-key-name"><a class="anchor" href="#clustered-key-name"></a><code>clustered-key-name</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The key used for replication of clustered beans. Applies to singleton EJBs when <code>clustered-bean</code> is set to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>This element is optional. If not set, the default value is the value of the <code>ejb-name</code> element.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clustered-lock-type"><a class="anchor" href="#clustered-lock-type"></a><code>clustered-lock-type</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The type of distributed locking to be performed.</p>
</div>
<div class="paragraph">
<p>For EJB beans, only <code>INHERIT</code> and <code>LOCK_NONE</code> are valid.</p>
</div>
<div class="paragraph">
<p>For CDI beans, valid values are <code>LOCK</code> and <code>INHERIT</code>, which is equivalent to using <code>LOCK_NONE</code>.</p>
</div>
<div class="paragraph">
<p>Default value is <code>INHERIT</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whitelist-package"><a class="anchor" href="#whitelist-package"></a><code>whitelist-package</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Used to whitelist packages on <a href="#/documentation/payara-server/classloading.adoc#extreme-classloading-isolation" class="page unresolved"><strong>extreme class loading isolation</strong></a>.
Whitelisted packages are taken into account by the server when scanning
libraries.</p>
</div>
<div class="paragraph">
<p>For more information about how extreme class loading isolation works on
Payara Server Community, see the
<a href="#/documentation/payara-server/classloading.adoc" class="page unresolved">Enhanced Classloading</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enable-implicit-cdi"><a class="anchor" href="#enable-implicit-cdi"></a><code>enable-implicit-cdi</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a <strong>WAR</strong> file, it is possible to set the property <code>bean-discovery-mode</code>
equal to <code>none</code> to turn off implicit scanning of the archive for bean
defining annotations, as defined by the <em>CDI 1.1</em> specification. The
default value of this setting is defined as <code>annotated</code> in the specification,
so the archive is scanned for any bean-defining annotations, which can cause
unwanted side effects.</p>
</div>
<div class="paragraph">
<p>In the <code>glassfish-application.xml</code> deployment descriptor for an EAR
file, the property <code>enable-implicit-cdi</code> can be set to <code>false</code> to
achieve the same goal for all modules inside the EAR assembly. The
default value is <code>true</code>, in line with the default value for WAR files.</p>
</div>
<div class="paragraph">
<p>If implicit CDI scanning causes problems for an EAR assembly, the value
<code>false</code> will disable implicit CDI scanning for all CDI modules inside
the EAR assembly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;glassfish-application&gt;
  &lt;enable-implicit-cdi&gt;false&lt;/enable-implicit-cdi&gt;
&lt;/glassfish-application&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default behavior of the admin console is for the <strong>Implicit CDI</strong>
checkbox to be enabled, but this will <strong>not</strong> override the application
configuration.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When implicit CDI is configured by using either the
<code>enable-implicit-cdi</code> property in the <code>glassfish-application.xml</code> or the
attribute <code>bean-discovery-mode="none"</code> from the <code>beans.xml</code> file in a
WAR, the admin console checkbox <em>*is always ignored*</em>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scanning-exclude-and-scanning-include"><a class="anchor" href="#scanning-exclude-and-scanning-include"></a><code>scanning-exclude</code> and <code>scanning-include</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modern WAR and EAR files very often include a number of 3rd party JARs.
In situations where some JARs require CDI scanning and others may break
if scanned, these can now be explicitly included or excluded from such
component scanning.</p>
</div>
<div class="paragraph">
<p>Both the <code>glassfish-application.xml</code> and the <code>glassfish-web.xml</code> files
support the following directives:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;scanning-exclude&gt;*&lt;/scanning-exclude&gt;
&lt;scanning-include&gt;ejb*&lt;/scanning-include&gt;
&lt;scanning-include&gt;conflicting-web-library&lt;/scanning-include&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, all JARs will be excluded by default, then all
JARs beginning with <code>ejb</code> will be scanned along with the JAR named
<code>conflicting-web-library</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="container-initializer-enabled"><a class="anchor" href="#container-initializer-enabled"></a><code>container-initializer-enabled</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This property configures whether to enable or disable the calling of
<code>ServletContainerInitializer</code> component classes defined in JAR files
bundled inside a WAR assembly.</p>
</div>
<div class="paragraph">
<p>For performance considerations, you can explicitly disable the servlet
container initializer by setting the <code>container-initializer-enabled</code>
element to <code>false</code>. This can help solve the deployment of web applications
that can suffer from conflicts with a custom bootstrapping process.</p>
</div>
<div class="paragraph">
<p>The default value for this configuration element is <code>true</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="default-role-mapping"><a class="anchor" href="#default-role-mapping"></a><code>default-role-mapping</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>With this property, you can set whether to enable the default group to
role mappings for your application&#8217;s security settings. This element is
set up as a <code>property</code> element with a <code>Boolean</code> value attribute like
this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;property name="default-role-mapping" value="true"&gt;
  &lt;description&gt;Enable default group to role mapping&lt;/description&gt;
&lt;/property&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enabling the default group to role mappings will cause all named groups
in the application&#8217;s linked security <em>realm</em> to be mapped to a role of the
same name. This will save you the time of having to redefine the same
roles and map them to the realm groups each time they are modified.</p>
</div>
<div class="paragraph">
<p>This will have the same effect as executing the following <code>asadmin</code>
command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin set configs.config.server-config.security-service.activate-default-principal-to-role-mapping=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Except its effect will only limit itself to the application instead of
all applications deployed on the server.</p>
</div>
<div class="paragraph">
<p>The default value of this property is <code>false</code>. This property can be set
in the <code>glassfish-web.xml</code>, <code>glassfish-ejb-jar.xml</code> and
<code>glassfish-application.xml</code> deployment descriptors.</p>
</div>
<div class="paragraph">
<p>In an EAR assembly, only the property set in the
<code>glassfish-application.xml</code> will take effect and if set in the
<code>glassfish-web.xml</code> and <code>glassfish-ejb-jar.xml</code>, it will be ignored.
Setting this configuration property in any of these files will always take
precedence over any setting configured on the server.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jaxrs-roles-allowed-enabled"><a class="anchor" href="#jaxrs-roles-allowed-enabled"></a><code>jaxrs-roles-allowed-enabled</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Since Payara Server 4.1.2.181; 5.181</em></p>
</div>
<div class="paragraph">
<p>Payara Server and Micro since versions <strong>4.1.2.181</strong> and <strong>5.181</strong> support <code>@RolesAllowed</code> out of the box to secure JAX-RS resources.</p>
</div>
<div class="paragraph">
<p>In some cases this may clash with existing code that interprets the same annotation using custom code.</p>
</div>
<div class="paragraph">
<p>The out-of-the-box support of <code>@RolesAllowed</code> for JAX-RS resources can be switched off by setting the <code>&lt;jaxrs-roles-allowed-enabled&gt;</code> tag in <code>WEB-INF/glassfish-web.xml</code> of a war archive to <code>false</code>. E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;jaxrs-roles-allowed-enabled&gt;false&lt;/jaxrs-roles-allowed-enabled&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="max-wait-time-in-millis"><a class="anchor" href="#max-wait-time-in-millis"></a><code>max-wait-time-in-millis</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Since Payara Server 4.1.2.172</em></p>
</div>
<div class="paragraph">
<p>Payara Server has re-implemented a property of the <code>glassfish-ejb-jar.xml</code>
descriptor that was available in GlassFish in versions prior to 4.0.</p>
</div>
<div class="paragraph">
<p>The <code>bean-pool</code> element allows users to specify controls on a per-EJB basis for
pooled stateless EJBs. Payara Server has reintroduced <code>max-wait-time-in-millis</code>
to govern what happens when the number of requests for an EJB exceeds the number
of beans available in the pool.</p>
</div>
<div class="paragraph">
<p>A value of <code>-1</code> disables the property and means that, when the pool is at
maximum usage and another request is made, a new EJB instance is created
immediately, with no upper bound.</p>
</div>
<div class="paragraph">
<p>A value of <code>0</code> means the server will wait indefinitely for an existing EJB
instance to be freed.</p>
</div>
<div class="paragraph">
<p>A value between <code>1</code> and <code>MAX_INTEGER</code> means that the server will wait for the
given amount of milliseconds for an EJB to be freed. Only after this
<code>max-wait-time-in-millis</code> is exceeded will the server create a new instance of
the requested EJB.</p>
</div>
<div class="paragraph">
<p>For more detail, see the <a href="#/documentation/payara-server/ejb/Overview.adoc" class="page unresolved">Enhanced EJB configuration</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="webservice-default-login-config"><a class="anchor" href="#webservice-default-login-config"></a><code>webservice-default-login-config</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Since Payara Server 4.1.2.173</em></p>
</div>
<div class="paragraph">
<p>When declaring a secured Web Service based on an EJB using the <em>glassfish-ejb-jar.xml</em>
deployment descriptor, it&#8217;s necessary to define the login configuration (authentication
method, security realm name, etc.) for each EJB Web Service that is secured inside
the assembly. For example, if an application contains 2 EJB web services called
<strong>EJBWS1</strong> and <strong>EJBWS2</strong>, and they need to be secured using <code>BASIC</code> authentication against
the <em>file</em> security realm, the following configuration would be needed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE glassfish-ejb-jar PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 EJB 3.1//EN" "http://glassfish.org/dtds/glassfish-ejb-jar_3_1-1.dtd"&gt;
&lt;glassfish-ejb-jar&gt;
  &lt;ejb&gt;
    &lt;ejb-name&gt;EJBWS1&lt;/ejb-name&gt;
    &lt;webservice-endpoint&gt;
      &lt;port-component-name&gt;EJBWS1Port&lt;/port-component-name&gt;
      &lt;endpoint-address-uri&gt;EJBWS1/EJBWebService&lt;/endpoint-address-uri&gt;
      &lt;login-config&gt;
        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;
        &lt;realm&gt;file&lt;/realm&gt;
      &lt;/login-config&gt;
    &lt;/webservice-endpoint&gt;
  &lt;/ejb&gt;
  &lt;ejb&gt;
    &lt;ejb-name&gt;EJBWS2&lt;/ejb-name&gt;
    &lt;webservice-endpoint&gt;
      &lt;port-component-name&gt;EJBWS2Port&lt;/port-component-name&gt;
      &lt;endpoint-address-uri&gt;EJBWS2/EJBWebService&lt;/endpoint-address-uri&gt;
      &lt;login-config&gt;
        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;
        &lt;realm&gt;file&lt;/realm&gt;
      &lt;/login-config&gt;
    &lt;/webservice-endpoint&gt;
  &lt;/ejb&gt;
&lt;/glassfish-ejb-jar&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the <code>login-config</code> element is repeated exactly like it is in the 2 EJB
definitions. Not only that, but if these Web services are defined using annotations
for each EJB component, then the <strong>JAX-WS</strong> information (Port Component Name, Endpoint
Address, etc.) would be duplicated too, which is too cumbersome for cases when
there are lots of EJB Web service definitions.</p>
</div>
<div class="paragraph">
<p>For this scenario, the <code>webservice-default-login-config</code> has been introduced to
simplify this configuration. When this element is declared, the login configuration
inside it will apply to all of the EJB defined Web Services by default.</p>
</div>
<div class="paragraph">
<p>The previous example can be simplified like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE glassfish-ejb-jar PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 EJB 3.1//EN" "http://glassfish.org/dtds/glassfish-ejb-jar_3_1-1.dtd"&gt;
&lt;glassfish-ejb-jar&gt;
  &lt;webservice-default-login-config&gt;
      &lt;auth-method&gt;BASIC&lt;/auth-method&gt;
      &lt;realm&gt;file&lt;/realm&gt;
  &lt;/webservice-default-login-config&gt;
&lt;/glassfish-ejb-jar&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All sub-elements tags of the <code>login-config</code> can be used inside this element.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If an EJB Web service definition needs a different login configuration
from the default, just redefine it as shown in the example and it will override
the default configuration.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jsp-config"><a class="anchor" href="#jsp-config"></a><code>jsp-config</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Since Payara Server 5.181</em></p>
</div>
<div class="paragraph">
<p>The default value of the <em>compiler</em> property for this element has changed from <em>1.5</em> to <em>1.8</em>, denoting a change from JDK5 to JDK8.</p>
</div>
<div class="paragraph">
<p>You can change this to another value by editing the <code>jsp-config</code> element in the <code>glassfish-web.xml</code> file.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
