<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Application Deployment :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="app-deployment.html">Application Deployment</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/Application%20Deployment/app-deployment.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Application Deployment</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Applications can be deployed to Payara Server in the same way as
<em>GlassFish Server 4.1 Open Source Edition</em>. Payara Server Community does not modify
this process but does add some new features.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_on_server_start"><a class="anchor" href="#_deploying_on_server_start"></a>Deploying on Server Start</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GlassFish has had the ability to deploy applications on server start for a long
time now, using the <em>autodeploy</em> directory. While acceptable in development
environments, the scanner used to deploy files in this directory is a security
risk for production and is therefore disabled in the <code>production</code> domain bundled with
Payara Server.</p>
</div>
<div class="paragraph">
<p>To reintroduce the capability of deploying an application on server startup
without the risk of enabling the deployment scanner, a feature from Payara Micro
was introduced: the ability to run asadmin commands at startup, either pre or
post boot.</p>
</div>
<div class="paragraph">
<p>To enable this feature, we have extended the <code>start-domain</code> feature to accept
two extra options: <code>--prebootcommandfile</code> and <code>--postbootcommandfile</code> which can
be used as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Pre-boot Commands</strong></dt>
<dd>
<p><strong>Usage</strong>: <code>asadmin&gt; start-domain --prebootcommandfile=/path/to/file</code></p>
<div class="paragraph">
<p><strong>Aim</strong>: passing a list of commands as a file to the server to run pre-boot.
Due to the time during boot when the commands in this file are executed, this
only supports <code>set</code> commands.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Post-boot Commands</strong></dt>
<dd>
<p><strong>Usage</strong>: <code>asadmin&gt; start-domain --postbootcommandfile=/path/to/file</code></p>
<div class="paragraph">
<p><strong>Aim</strong>: passing a list of commands as a file to the server to run post-boot.
This is where commands such as service configuration commands should be run.</p>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There are some important caveats to note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Both files should be saved in a text format, with each command on it&#8217;s own line.</p>
</li>
<li>
<p>Lines where the first non-whitespace character is # are treated as comments</p>
</li>
<li>
<p>Any blank lines will be ignored</p>
</li>
<li>
<p>Any invalid or failing commands will be logged to the server.log and the file will continue to be processed</p>
</li>
<li>
<p>The files <strong><em>must</em></strong> exist, and be accessible from Payara Server.</p>
</li>
<li>
<p>Both pre-boot and post-boot files can be passed at the same time.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_to_a_server_already_started"><a class="anchor" href="#_deploying_to_a_server_already_started"></a>Deploying to a Server Already Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To deploy via the CLI once the server has already started, use the 'deploy' asadmin command.</p>
</div>
<div class="paragraph">
<p><strong>Usage</strong>: <code>asadmin&gt; deploy /path/to/file</code>
All of the glassfish deploy options apply.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Payara Specific Options</strong></dt>
<dd>
<p><strong>--skipdsfailure</strong> <em>(Since Payara Server 4.1.2.173).</em>  This option will skip over a datasource failure. This means an application can be deployed with a datasource set up, but the database need not be running at the time. Without this option the deployment would fail if a datasource is defined and the database is not available.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Example</strong>: <code>asadmin&gt; deploy --skipdsfailure /home/mark/clusterjsp-1.1.war</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_from_a_url"><a class="anchor" href="#_deploying_from_a_url"></a>Deploying from a URL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Payara Embedded has the ability to deploy applications from a URL for a while, and this feature has now been brought into Payara Server. To facilitate this new feature, a new asadmin command was created: <code>deploy-remote-archive</code>. This command takes all of the same parameters as the standard deploy command, and is used in exactly the same way - the only difference is in the command name, and the fact you specify a URL instead of a file.</p>
</div>
<div class="paragraph">
<p><strong>Usage</strong>: <code>asadmin&gt; deploy-remote-archive <em>url</em></code></p>
</div>
<div class="paragraph">
<p><strong>Example</strong>: <code>asadmin&gt; deploy-remote-archive <a href="https://raw.github.com/Pandrex247/Payara_PatchedProjects/Payara-Maven-Deployer/fish/payara/testing/clusterjsp/1.1/clusterjsp-1.1.war" class="bare">https://raw.github.com/Pandrex247/Payara_PatchedProjects/Payara-Maven-Deployer/fish/payara/testing/clusterjsp/1.1/clusterjsp-1.1.war</a></code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>At this point in time, the command will only accept HTTP and HTTPS URLs.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_from_a_maven_repository"><a class="anchor" href="#_deploying_from_a_maven_repository"></a>Deploying from a Maven Repository.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The feature of Payara Micro to deploy applications from a Maven Repository using their Group, Artefact, Version (GAV) coordinates has also been brought into Payara Server Community. This functionality uses the same command as when deploying from a URL: <code>deploy-remote-archive</code>. This command takes all of the same parameters as the standard deploy command, but has an extra parameter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>additionalRepositories</code> - This parameter accepts a comma separated list of repository URLs, that will be probed when searching for an artefact. By default, the command will only look in Maven Central.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Usage</strong>: <code>asadmin&gt; deploy-remote-archive --additionalRepositories repo1,repo2,&#8230;&#8203;,repoN groupId,artefactId,versionNumber</code></p>
</div>
<div class="paragraph">
<p><strong>Examples</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>asadmin&gt; deploy-remote-archive --additionalRepositories <a href="https://google.co.uk,https://raw.github.com/Pandrex247/Payara_PatchedProjects/Payara-Maven-Deployer" class="bare">https://google.co.uk,https://raw.github.com/Pandrex247/Payara_PatchedProjects/Payara-Maven-Deployer</a> fish.payara.testing,clusterjsp,1.1</code></p>
</li>
<li>
<p><code>asadmin&gt; deploy-remote-archive --additionalRepositories <a href="https://raw.github.com/Pandrex247/Payara_PatchedProjects/Payara-Maven-Deployer" class="bare">https://raw.github.com/Pandrex247/Payara_PatchedProjects/Payara-Maven-Deployer</a> fish.payara.testing,clusterjsp,1.1</code></p>
</li>
<li>
<p><code>asadmin&gt; deploy-remote-archive --target instance1 fish.payara.testing,clusterjsp,1.1</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you don&#8217;t specify a name or context root for the artefact when deploying using GAV coordinates, it will just be the artefact name (in the example above, it would be clusterjsp).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If an application matching the GAV coordinates exists on multiple repositories, the first found will be deployed. The order that the repositories are searched is the order that you specify them in. For example, given an <em>additionalRepositories</em> of <em>repo1,repo2</em>, the order that the repositories would be searched is: Maven Central &gt; repo1 &gt; repo2.</p>
</div>
<div class="paragraph">
<p>Although the command accepts Maven GAV coordinates, it does not actually make use of Maven, and so artefacts will not be saved into your local maven repository.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overwriting_the_application_name"><a class="anchor" href="#_overwriting_the_application_name"></a>Overwriting the Application Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Since Payara Server 4.1.2.182 and 5.182</em></p>
</div>
<div class="paragraph">
<p>When deploying an application or a module on Payara Server Community from an IDE (like
<strong>NetBeans</strong> or <strong>IntelliJ</strong>), the IDE deploys to Payara Server using the asadmin
deploy command, with the --name option specified. This will force the application
or module to have the specified name over the name defined in deployment
descriptor. This is undesired because the IDE usually infers the application or
module name from the name of the project or the package file and doesn’t take
the correct name of the application or module into account.</p>
</div>
<div class="paragraph">
<p>To solve the issue, application or module name defined in the deployment
descriptor will <strong>always</strong> take precedence over the <code>--name</code> option. But you use
the <code>--name</code> and <code>--forcename</code> options to override this behaviour.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Prior to 4.1.2.182 and 5.182 <code>--forcename</code> option was only supported on EJB.
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
