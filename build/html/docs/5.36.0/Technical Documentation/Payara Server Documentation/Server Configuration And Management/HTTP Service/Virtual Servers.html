<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Virtual Servers :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="Virtual%20Servers.html">Virtual Servers</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/HTTP%20Service/Virtual%20Servers.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Virtual Servers</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#configuration">Configuration</a>
<ul class="sectlevel2">
<li><a href="#id">ID</a></li>
<li><a href="#hosts">Hosts</a></li>
<li><a href="#state">State</a></li>
<li><a href="#sso">SSO</a></li>
<li><a href="#sso-cookie-http-only">SSO Cookie Http Only</a></li>
<li><a href="#network-listeners">Network Listeners</a></li>
<li><a href="#_default_web_module">Default Web Module</a></li>
<li><a href="#log-file">Log File</a></li>
<li><a href="#docroot">Docroot</a></li>
<li><a href="#access-log-directory">Access Log Directory</a></li>
<li><a href="#additional-properties">Additional properties</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A virtual server is an object that allows one physical server instance to appear
as many. In some ways it is analogous to a network card on a PC: if you have
multiple network cards, the network will consider them as two separate hosts
despite them being part of one. Virtual Servers do the same thing to your
servers, which means for example you could have multiple domain names
(not administrative domains) associated with the same server.</p>
</div>
<div class="paragraph">
<p>When deploying an application, you have the option to deploy to a specific
Virtual Server, which will have multiple network listeners associated with it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Existing virtual servers can be configured from the admin console or with <code>set</code>
asadmin commands. The virtual server configurations can be found in the admin
console under <strong>Configurations</strong> &#8594; <strong>your-config</strong> &#8594; <strong>Virtual Servers</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/http/virtual-server-config.png" alt="Configuration Page Location">
</div>
</div>
<div class="paragraph">
<p>The following fields can be configured:</p>
</div>
<hr>
<div class="sect2">
<h3 id="id"><a class="anchor" href="#id"></a>ID</h3>
<div class="paragraph">
<p>The unique ID for the virtual server. The only field which cannot be altered
from the admin console. The ID cannot begin with a number.</p>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.id=value</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="hosts"><a class="anchor" href="#hosts"></a>Hosts</h3>
<div class="paragraph">
<p>A comma separated list of values allowed in the <code>host</code> request header to select
this virtual server. Each virtual server with the same connection group must
have a unique host for that group.</p>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.hosts=value,value2</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="state"><a class="anchor" href="#state"></a>State</h3>
<div class="paragraph">
<p>The enabled state of the virtual server. There are 3 options for this property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>On</strong> &#8594; This means that the virtual server is active and will be ready to
serve requests.</p>
</li>
<li>
<p><strong>Off</strong> &#8594; This means that the virtual server is inactive, and will return a
404 error for all requests made through it. This will look from the outside
as if no applications are deployed to this server.</p>
</li>
<li>
<p><strong>Disabled</strong> &#8594; This means that the virtual server is inactive, and will return
a 403 error for all requests made through it. This will look from the outside
as if the server is intentionally down for maintenence.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.state=on/off/disabled</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="sso"><a class="anchor" href="#sso"></a>SSO</h3>
<div class="paragraph">
<p>Allows multiple web applications deployed to the same virtual server to share
the user authentication state.  This would mean that signing into one
application would implicitly sign you into all of the others.
There are 3 options for this property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>True</strong> (enabled) &#8594; This enables SSO for applications on the same virtual
server.</p>
</li>
<li>
<p><strong>False</strong> (disabled) &#8594; This disables SSO for applications on the same virtual
server.</p>
</li>
<li>
<p><strong>Inherit</strong> (controlled by HTTP service) &#8594; This will inherit from the value
specified in the <strong>HTTP Service</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.sso-enabled=true/false/inherit</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="sso-cookie-http-only"><a class="anchor" href="#sso-cookie-http-only"></a>SSO Cookie Http Only</h3>
<div class="paragraph">
<p>Determines whether to add the <code>HttpOnly</code> flag to the <code>JSESSIONIDSSO</code> cookie.
In practice, this will disallow JavaScript access to the cookie in the browser.
This prevents malicious XSS attacks hijacking a Java session. It is enabled by
default.</p>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.sso-cookie-http-only=true/false</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="network-listeners"><a class="anchor" href="#network-listeners"></a>Network Listeners</h3>
<div class="paragraph">
<p>Comma separated list of network listeners which applications deployed to this
virtual server are available on.</p>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.network-listeners=listener-1,listener-2</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_default_web_module"><a class="anchor" href="#_default_web_module"></a>Default Web Module</h3>
<div class="paragraph">
<p>This defines which application deployed to this virtual server will be requested
if no modules are resolved in the request. For example if <code>app1</code> and <code>app2</code>
have context roots of <code>/app1</code> and <code>/app2</code> respectively, <code>app1</code> will be returned
when the user requests <code>/</code>.</p>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.default-web-module=app1</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="log-file"><a class="anchor" href="#log-file"></a>Log File</h3>
<div class="paragraph">
<p>This defines a file where log messages coming from this virtual server are
redirected to. This allows you to separate application logs from server logs.</p>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.log-file=/dir/to/logs/file.log</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="docroot"><a class="anchor" href="#docroot"></a>Docroot</h3>
<div class="paragraph">
<p>This defines the directory used as the document root for this virtual server.
A document root is a directory where static files can be placed and served from.
For example, if you have a web application deployed to <code><a href="http://localhost:8080/app1" class="bare">http://localhost:8080/app1</a></code>
and the corresponding virtual server has a docroot value of <code>/opt/server/docs</code>,
then requesting <code><a href="http://localhost:8080/app1/img.jpg" class="bare">http://localhost:8080/app1/img.jpg</a></code> will fetch the file at
<code>/opt/server/docs/img.jpg</code>.</p>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.docroot=/dir/to/docs/</code></p>
</div>
<hr>
<div class="sect3">
<h4 id="access-logging"><a class="anchor" href="#access-logging"></a>Access Logging</h4>
<div class="paragraph">
<p>Enables access logging for this virtual server. Access logging logs all requests
made to that virtual server.
There are 3 options for this property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>True</strong> (enabled) &#8594; This enables access logging for applications on the same
virtual server.</p>
</li>
<li>
<p><strong>False</strong> (disabled) &#8594; This disables access logging for applications on the
same virtual server.</p>
</li>
<li>
<p><strong>Inherit</strong> (controlled by HTTP service) &#8594; This will inherit from the value
specified in the <strong>HTTP Service</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.access-logging=true/false/inherit</code></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="access-log-directory"><a class="anchor" href="#access-log-directory"></a>Access Log Directory</h3>
<div class="paragraph">
<p>Defines the directory used for access logs.</p>
</div>
<div class="paragraph">
<p><strong>Asadmin Command:</strong></p>
</div>
<div class="paragraph">
<p><code>set configs.config.server-config.http-service.virtual-server.${virtual-server-name}.access-log=/dir/to/logs</code></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="additional-properties"><a class="anchor" href="#additional-properties"></a>Additional properties</h3>
<div class="paragraph">
<p>Defines additional properties for the configuration of a virtual server.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 70%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sso-max-inactive-seconds</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of seconds of no activity after which a user&#8217;s SSO record becomes elegible for purging.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sso-reap-interval-seconds</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of seconds between purges of SSO records.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>setCacheControl</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of Cache-Control response directives (See section 14.9 of: <a href="https://www.ietf.org/rfc/rfc2616.txt" class="bare">https://www.ietf.org/rfc/rfc2616.txt</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>allowLinking</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set to true, resources that are symbolic links will be served for all applications deployed to this virtual server. Can be overriden for an individual application in the glassfish-web.xml with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;glassfish-web-app&gt;
  &lt;property name="allowLinking" value="false" /&gt;
&lt;/glassfish-web-app&gt;</pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Note: Setting this property to <code>true</code> on Windows systems exposes JSP source code.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accessLogWriteInterval</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of seconds between each time the log is written to disk. The access log is written when the buffer is full or when the interval expires. If the value is 0, the buffer is always written even if it&#8217;s not full.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accessLogBufferSize</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size, in bytes, of the buffer where access log calls are stored.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32768</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>allowRemoteAddress</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of regular expression patterns to which the remote client&#8217;s IP address is compared. The IP must match one of the patterns to be accepted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>denyRemoteAddress</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of regular expression patterns to which the remote client&#8217;s IP address is compared. The IP must not match any of the patterns to be accepted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>allowRemoteHost</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of regular expression patterns to which the remote client&#8217;s host name is compared. The host name must match one of the patterns to be accepted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>denyRemoteHost</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of regular expression patterns to which the remote client&#8217;s host name is compared. The host name must not match any of the patterns to be accepted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>authRealm</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the name attribute of an auth-realm, which overrides the server&#8217;s default realm for standalone web applications deployed to this virtual server. Can be overriden for an individual application with a realm defined in the web.xml.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>securePagesWithPragma</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this property to false to ensure that for all web applications on this server file downloads using SSL work properly in Internet Explorer.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>contextXmlDefault</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the directory of the context.xml used for this virtual server, if one is used. For more information on the context.xml file, see <a href="https://tomcat.apache.org/tomcat-5.5-doc/config/context.html" class="bare">https://tomcat.apache.org/tomcat-5.5-doc/config/context.html</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>alternatedocroot_n</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an alternate document root, where n is a positive integer that allows specification of more than one.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>send-error_n</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies custom error page mappings for the virtual server, which are inherited by all web applications deployed on the virtual server, unless overridden in the web.xml. The value is a string, composed of three values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>code &#8594; The HTTP response status code for the custom error page.</p>
</li>
<li>
<p>path &#8594; The path of the file to be returned, relative to the <code>/config</code> directory.</p>
</li>
<li>
<p>reason (optional) &#8594; The text of the reason string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>E.g. <code>send-error_1="code=404 path=/dir/of/file/error.html reason=UNAUTHORIZED"</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>redirect_n</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies a redirect from an old url to a new one. The value is a string, composed of two values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>from &#8594; The prefix of the requested URI to match.</p>
</li>
<li>
<p>url-prefix &#8594; The prefix of the new URI to return to the client. The <strong>from</strong> prefix is replaced by this value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>E.g. <code>redirect_1="from=/fake url-prefix=http://another"</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>listener_n</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the fully qualified class name of a custom Catalina listener, where n is a positive integer that allows the specification of more than one. The listener class must implement the <strong>org.apache.catalina.ContainerListener</strong> or <strong>org.apache.catalina.LifecycleListener</strong> interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>errorReportValve</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the fully qualified class name of a custom valve that produces default error pages for applications on this virtual server. Specify an empty string to disable the default error page mechanism for this virtual server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.apache.catalina. valves.ErrorReportValve</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
