<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Core Documentation :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="jacc.html">Core Documentation</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/ondro-poc/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/Security%20Configuration/jacc.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Core Documentation</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>JACC stands for <strong>Java Authentication Contract for Containers</strong>. It&#8217;s defined in
the <a href="https://jcp.org/en/jsr/detail?id=115">JSR 115 specification</a> and all Java
EE complaint servers are mandated to provide a JACC Policy by default.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-install-a-custom-jacc-provider-per-server"><a class="anchor" href="#how-to-install-a-custom-jacc-provider-per-server"></a>How to install a custom JACC provider per Server (Global)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having coded a JACC provider, the first thing to do it is to make these
classes available for the server. For that purpose, you need to put the implementation JAR, with all its dependencies, under the <code>{PAYARA_HOME}/lib</code> folder.</p>
</div>
<div class="paragraph">
<p>The next thing to do is to tell Payara you want to use the custom JACC
provider. To do this, you have to execute the following administration command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">create-jacc-provider
--policyConfigurationFactoryProvider=com.example.CustomPolicyConfigurationFactory
--policyProvider=com.example.CustomPolicy --target=server-config custom-provider set configs.config.server-config.security-service.jacc=custom-provider</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will result in the following configuration element added to the <em>domain.xml</em> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;security-service jacc="custom-provider"&gt;
    &lt;jacc-provider policy-provider="com.example.CustomPolicy" name="custom-provider"
      policy-configuration-factory-provider="com.example.CustomPolicyConfigurationFactory"&gt;
    &lt;/jacc-provider&gt;
    &lt;!-- More providers can be defined --&gt;
&lt;/security-service&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see on the XML excerpt, more JACC providers can be defined
(by default, the <code>simple</code> and <code>default</code> providers are already defined),
but only one will be used at runtime, specified by the <code>jacc</code> attribute
on the <code>security-service</code> element.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-install-a-custom-jacc-provider-per-application"><a class="anchor" href="#how-to-install-a-custom-jacc-provider-per-application"></a>How to install a custom JACC provider per Application (Local)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Since Payara Server 4.1.2.182 and 5.182</em></p>
</div>
<div class="paragraph">
<p>With a custom JACC provide per server, applications deployed to a single server can&#8217;t have their own custom authorization contracts.
In this case, having a custom JACC Provider per application makes more sense by using the <code>fish.payara.jacc.JaccConfigurationFactory</code> API.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
To access this API, you will need to add a dependency to the <a href="#/documentation/payara-server/public-api/Overview.adoc" class="page unresolved">Payara Public API</a> first.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example below, when an application is deployed, a custom JACC provider is registered programmatically using the <code>JaccConfigurationFactory</code>(consisting of a JACC <code>PolicyConfigurationFactory</code> and <code>Policy</code> implementation objects)
in the <code>contextInitialized</code> method of <code>ServletContextListener</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@WebListener
public class JaccInstaller implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent sce) {

        JaccConfigurationFactory
                .getJaccConfigurationFactory()
                .registerContextProvider(
                        getAppContextId(sce.getServletContext()),
                        new CustomPolicyConfigurationFactory(),
                        new CustomPolicy()
                );

    }

    private String getAppContextId(ServletContext servletContext) {
        return servletContext.getVirtualServerName() + " " + servletContext.getContextPath();
    }

}</code></pre>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
