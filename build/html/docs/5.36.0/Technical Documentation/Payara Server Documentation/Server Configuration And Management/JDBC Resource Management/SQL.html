<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL Management in Payara Server :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="SQL.html">SQL Management in Payara Server</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/JDBC%20Resource%20Management/SQL.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">SQL Management in Payara Server</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Payara Server keeps track of the recently executed SQL statements for monitoring purposes.
This way, one can review which SQL statements are executed, how many times the same statement is executed and how long it took.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="activate-sql-statment-overview"><a class="anchor" href="#activate-sql-statment-overview"></a>Activate Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The activation of the collection is controlled by the monitoring service.</p>
</div>
<div class="paragraph">
<p>When using the Web Administration console, go to <em>Configuration → [instance-configuration (like server-config)] → Monitoring:</em> and select the level <em>High</em> for the <em>JDBC Connection pool</em> component.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/advanced-jdbc/activate-sql-statements.png" alt="Activate JDBC Connection pool monitoring with administration console"></span></p>
</div>
<div class="paragraph">
<p>When using the <em>asadmin</em> CLI, you can execute the following command to set the <em>Level Value</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">set configs.config.server-config.monitoring-service.module-monitoring-levels.jdbc-connection-pool=HIGH</code></pre>
</div>
</div>
<div class="paragraph">
<p>The information can be consulted via the JMX beans or the Rest monitoring interface. These need to be activated also,
see <a href="#monitoring-service-configuration">[monitoring-service-configuration]</a> and <a href="#rest-monitoring-configuration">[rest-monitoring-configuration]</a> on how to do this.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="view-sql-statment-overview"><a class="anchor" href="#view-sql-statment-overview"></a>Viewing statements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you want to retrieve the information through the JMX channel, you can find the information in the following MBean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>amx:pp=/mon/server-mon[server],type=jdbcra-mon,name=resources/&lt;pool-name&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>When using the Rest monitoring interface, you can access the following URL</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://localhost:4848/monitoring/domain/server/resources/&lt;pool-name&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In both cases, the <em>&lt;pool-name&gt;</em> is the actual pool name you have created within Payara Server and which you like to retrieve the information for.</p>
</div>
<div class="paragraph">
<p>The properties we want to highlight here are</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>frequsedsqlqueries</code></dt>
<dd>
<p>Contains the list of all SQL statements and their execution count, which are executed during the collection time frame.</p>
</dd>
<dt class="hdlist1"><code>slowSqlQueries</code></dt>
<dd>
<p>Contains again the list of all SQL statements but this time with the maximum execution time they took.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-sql-statment-overview"><a class="anchor" href="#configure-sql-statment-overview"></a>Configuring parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The SQL statement collection has a few configuration values which have default values.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Timeframe: By default, the info about the SQL statements are retained during 5 minutes</p>
</li>
<li>
<p>Cache size: The information is kept in a cache which has by default place for 100000 items.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These values can be configured by defining some key-value pairs in the properties for the connection pool. This can be done during the creation or afterward by updating the pool.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TIME-TO-KEEP-QUERIES-IN-MINUTES: This defines the number of minutes the SQL statement info is retained.</p>
</li>
<li>
<p>MAX-CACHE-SIZE: This defines the maximum size of the cache.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Setting the maximum size of the cache to <code>0</code> will disable it completely.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When the cache size is too small, you see an information message in the log to indicate that not all statements could be retained.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="slow-sql-logger"><a class="anchor" href="#slow-sql-logger"></a>Slow SQL Logger</h2>
<div class="sectionbody">
<div class="paragraph">
<p>:page-aliases:Technical Documentation/Payara Server Documentation/advanced-jdbc/slow-sql-logger.adoc</p>
</div>
<div class="paragraph">
<p>Many performance problems in Enterprise Applications can be traced to slow database access. Payara Server Community includes capabilities to detect and log slow SQL queries executed via a JDBC Connection pool. The Slow SQL logger monitors all queries executed on the connection pool and if they exceed a configurable execution time in seconds a warning message is logged into the server log.</p>
</div>
<div class="paragraph">
<p>The warning message (see below) logs the SQL query and the stack trace to the code executing the query. This enables rapid diagnosis by pinpointing the exact lines of code to investigate.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-slow-sql-logger"><a class="anchor" href="#configuring-the-slow-sql-logger"></a>Configuring the Slow SQL Logger</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ensure Wrap JDBC Objects is enabled in your JDBC Connection Pool (enabled by default) for the Slow SQL Logger to function correctly.</p>
</div>
<div class="paragraph">
<p>There are a number of ways to configure the slow SQL threshold time on a JDBC connection pool.</p>
</div>
<div class="sect2">
<h3 id="slow-sql-administration-console"><a class="anchor" href="#slow-sql-administration-console"></a>Using the Administration Console</h3>
<div class="paragraph">
<p>To configure slow SQL logging on a JDBC connection pool via the administration console, navigate to the Connection Pool&#8217;s <strong>Advanced Properties</strong> tab. Then specify the <strong>Slow Query Log Threshold</strong> time in seconds or use a decimal value to signify milliseconds.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/advanced-jdbc/slowsqllogging.png" alt="Slow SQL Logging settings in the administration console"></span></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
setting the threshold to <code>-1</code> will disable the feature
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="slow-sql-asadmin"><a class="anchor" href="#slow-sql-asadmin"></a>Using Asadmin commands</h3>
<div class="paragraph">
<p>The <strong>Slow Query Log Threshold</strong> time for a JDBC connection pool can also be configured with an <code>asadmin</code> command, by using the <code>set</code> command to set the <code>slow-query-threshold-in-seconds</code> property, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin set domain.resources.jdbc-connection-pool.__TimerPool.slow-query-threshold-in-seconds=50</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also set the threshold time to milliseconds simply by passing a decimal value. Below is a example of setting the threshold on the <code>__TimerPool</code> JDBC connection pool to <strong>200</strong> milliseconds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin set domain.resources.jdbc-connection-pool.__TimerPool.slow-query-threshold-in-seconds=0.2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="slow-sqldeployment"><a class="anchor" href="#slow-sqldeployment"></a>Application Deployment</h3>
<div class="paragraph">
<p>In Java EE 7+ applications, a JDBC data source can be deployed by adding the <code>@DataSourceDefinition</code> annotation to  a managed component (like and <code>@Stateless</code> EJB bean for example). The <strong>Slow Query Log Threshold</strong> time can be configured using this annotation, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DataSourceDefinition(
    name = "java:app/MyApp/MyDS",
    className = "org.h2.jdbcx.JdbcDataSource",
    url = "jdbc:h2:mem:test",
    properties = {"fish.payara.slow-query-threshold-in-seconds=5"})</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Data source definition can also be added to a deployment descriptor of an application, for example in the <em>web.xml</em> standard deployment descriptor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;data-source&gt;
    &lt;name&gt;java:global/ExampleDataSource&lt;/name&gt;
    &lt;class-name&gt;com.mysql.jdbc.jdbc2.optional.MysqlXADataSource&lt;/class-name&gt;
    &lt;server-name&gt;localhost&lt;/server-name&gt;
    &lt;port-number&gt;3306&lt;/port-number&gt;
    &lt;database-name&gt;mysql&lt;/database-name&gt;
    &lt;user&gt;test&lt;/user&gt;
    &lt;password&gt;test&lt;/password&gt;
    &lt;!-- Example of how to use a Payara specific custom connection pool setting --&gt;
    &lt;property&gt;
       &lt;name&gt;fish.payara.slow-query-threshold-in-seconds&lt;/name&gt;
       &lt;value&gt;5&lt;/value&gt;
    &lt;/property&gt;
&lt;/data-source&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-trace"><a class="anchor" href="#example-trace"></a>Example Trace</h3>
<div class="paragraph">
<p>Below is an example <code>WARNING</code> trace for a slow query recollected from the server&#8217;s log:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-log hljs" data-lang="log">[#|2016-02-01T22:39:29.289+0000|WARNING|Payara 4.1|javax.enterprise.resource.sqltrace.com.sun.gjc.util|_ThreadID=61;_ThreadName=http-listener-1(2);_TimeMillis=1454366369289;_LevelValue=900;|
  SQL Query Exceeded Threshold Time: 5000(ms): Time Taken: 10000(ms)
Query was SELECT ID, AGE, BIO, BIRTHDATE, BIRTHDAY, DATEFORMAT, DATEOFBIRTH, DATEOFHIRE, EMAIL, HIREDATE, HIREDAY, MEMBERAGE, NAME, TODAYSDATE FROM MEMBERENTITY WHERE (NAME = ?);

java.lang.Exception: Stack Trace shows code path to SQL
    at fish.payara.jdbc.SlowSQLLogger.sqlTrace(SlowSQLLogger.java:123)
    at com.sun.gjc.util.SQLTraceDelegator.sqlTrace(SQLTraceDelegator.java:122)
    at com.sun.gjc.spi.jdbc40.ProfiledConnectionWrapper40$1.invoke(ProfiledConnectionWrapper40.java:448)
    at com.sun.proxy.$Proxy265.executeQuery(Unknown Source)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeSelect(DatabaseAccessor.java:1009)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:644)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:560)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:2055)
    at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:570)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:242)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:228)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:299)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:694)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2740)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRows(ExpressionQueryMechanism.java:2693)
    at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:559)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1175)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:904)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1134)
    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:460)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1222)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2896)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1857)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1839)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1804)
    at org.eclipse.persistence.internal.jpa.QueryImpl.executeReadQuery(QueryImpl.java:258)
    at org.eclipse.persistence.internal.jpa.QueryImpl.getResultList(QueryImpl.java:473)
    at fish.payara.team.info.controllers.MemberSessionBean.getTeamMemberByName(MemberSessionBean.java:35)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sql-trace-listeners"><a class="anchor" href="#sql-trace-listeners"></a>SQL Trace Listeners</h2>
<div class="sectionbody">
<div class="paragraph">
<p>:page-aliases:Technical Documentation/Payara Server Documentation/advanced-jdbc/sql-trace-listeners.adoc</p>
</div>
<div class="paragraph">
<p>Payara Server provides support for custom SQL Trace Listeners. A <strong>SQL Trace Listener</strong> is registered against a data source and is called after each method call made on the JDBC connection pool.</p>
</div>
<div class="paragraph">
<p>SQL Trace Listeners allows developers to track all calls to the database and can be used to develop custom auditing, error handling or monitoring components. SQL Trace Listeners can be enabled globally on a data source if the class that implements it is on the server&#8217;s <em>classpath</em>, or can be enabled on application specific data sources by including them in the application&#8217;s WAR or EAR.</p>
</div>
<div class="sect2">
<h3 id="sql-trace-listener-interface"><a class="anchor" href="#sql-trace-listener-interface"></a>SQL Trace listener Interface</h3>
<div class="paragraph">
<p>The SQL Trace Listener interface is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface SQLTraceListener {
    /**
     * Notify listeners with SQL trace information.
     * @param record SQLTraceRecord that has information related
     * to the SQL operation
     */
    public void sqlTrace(SQLTraceRecord record);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To write a custom trace listener you need to implement the interface and override the <code>sqlTrace</code> method. The <code>SQLTraceRecord</code> object contains information about the execute call to the JDBC connection pool. The following is the list of properties that can be queried using their respective <strong>getter</strong> methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    /**
     * Thread ID from which SQL statement originated.
     */
    private long threadID;

    /**
     * Thread Name from which SQL statement originated.
     */
    private String threadName;

    /**
     * Pool Name in which the SQL statement is executed.
     */
    private String poolName;

    /**
     * Type of SQL query. Could be PreparedStatement, CallableStatement or
     * other object types.
     */
    private String className;

    /**
     * Method that executed the query.
     */
    private String methodName;

    /**
     * Time of execution of query.
     */
    private long timeStamp;

    /**
     * Parameters of the method that executed the SQL query. Includes information
     * like SQL query, arguments and so on.
     */
    private Object[] params;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-sql-trace-listener"><a class="anchor" href="#example-sql-trace-listener"></a>SQL Trace Listener Example</h3>
<div class="paragraph">
<p>The following code fragment illustrates a example SQL trace listener that just logs the executed call to the server&#8217;s log file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SQLTraceLogger implements SQLTraceListener {

    private static Logger _logger = initLogger();

    private static Logger initLogger() {
        _logger = LogDomains.getLogger(SQLTraceLogger.class, LogDomains.SQL_TRACE_LOGGER);
        return _logger;
    }

    public SQLTraceLogger() {
    }

    public void sqlTrace(SQLTraceRecord record) {
        _logger.log(Level.FINE, record.toString());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-sql-trace-listeners"><a class="anchor" href="#configuring-sql-trace-listeners"></a>Configuring SQL Trace Listeners</h3>
<div class="sect3">
<h4 id="sql-trace-administration-console"><a class="anchor" href="#sql-trace-administration-console"></a>Using the Administration Console</h4>
<div class="paragraph">
<p>SQL Trace Listeners can be enabled on a JDBC connection pool through the administration web console. Navigate to the <strong>Advanced Tab</strong> of your connection pool by selecting the JDBC &#8594; JDBC Connection Pools &#8594; <strong>&lt;Your Connection pool&gt;</strong>.</p>
</div>
<div class="paragraph">
<p>Proceed to add the fully qualified class name of your SQL Trace Listener implementation class in the <strong>SQL Trace Listeners</strong> field:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/advanced-jdbc/sqltracelistener.png" alt="Enabling SQL Tracing in the administration console"></span></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The implementation class must be on the server&#8217;s <em>classpath</em> for it to work correctly
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_using_asadmin_commands"><a class="anchor" href="#_using_asadmin_commands"></a>Using asadmin commands</h4>
<div class="paragraph">
<p>SQL Trace Listeners can be enabled on a JDBC connection pool using with an <code>asadmin</code> commands by using the <code>set</code> command to set the <code>fish.payara.lsql-trace-listeners</code> to the fully qualified class name of your listener implementation, like on the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin set domain.resources.jdbc-connection-pool.__TimerPool.sql-trace-listeners=fish.payara.examples.payaramicro.datasource.example.CustomSQLTracer</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sql-trace-deployment"><a class="anchor" href="#sql-trace-deployment"></a>Application Deployment</h3>
<div class="paragraph">
<p>In Java EE 7+ applications, a JDBC data source can be deployed by adding the <code>@DataSourceDefinition</code> annotation to  a managed component (like and <code>@Stateless</code> EJB bean for example). SQL Trace Listener classes can be configured using this annotation, like in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DataSourceDefinition(
    name = "java:app/MyApp/MyDS",
    className = "org.h2.jdbcx.JdbcDataSource",
    url = "jdbc:h2:mem:test",
    properties = {"fish.payara.sql-trace-listeners=fish.payara.examples.payaramicro.datasource.example.CustomSQLTracer"})</code></pre>
</div>
</div>
<div class="paragraph">
<p>The data source definition can also be added to a deployment descriptor of an application, for example in the <em>web.xml</em> standard deployment descriptor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;data-source&gt;
    &lt;name&gt;java:global/ExampleDataSource&lt;/name&gt;
    &lt;class-name&gt;com.mysql.jdbc.jdbc2.optional.MysqlXADataSource&lt;/class-name&gt;
    &lt;server-name&gt;localhost&lt;/server-name&gt;
    &lt;port-number&gt;3306&lt;/port-number&gt;
    &lt;database-name&gt;mysql&lt;/database-name&gt;
    &lt;user&gt;test&lt;/user&gt;
    &lt;password&gt;test&lt;/password&gt;
    &lt;!-- Example of how to use a Payara specific custom connection pool setting --&gt;
    &lt;property&gt;
       &lt;name&gt;fish.payara.sql-trace-listeners&lt;/name&gt;
       &lt;value&gt;fish.payara.examples.payaramicro.datasource.example.CustomSQLTracer&lt;/value&gt;
    &lt;/property&gt;
&lt;/data-source&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See Also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../../Payara%20Micro%20Documentation/Payara%20Micro%20Configuration%20and%20Management/Database%20Management/SQL%20Trace%20Listeners.html" class="page">SQL Trace Listeners in Payara Micro</a></p>
</li>
<li>
<p><a href="../../../Payara%20Micro%20Documentation/Payara%20Micro%20Configuration%20and%20Management/Database%20Management/Slow%20SQL%20Logger.html" class="page">Slow SQL Logging in Payara Micro</a></p>
</li>
<li>
<p><a href="../../../Payara%20Micro%20Documentation/Payara%20Micro%20Configuration%20and%20Management/Database%20Management/Log%20JDBC%20Calls.html" class="page">JDBC Call Logging in Payara Micro</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
