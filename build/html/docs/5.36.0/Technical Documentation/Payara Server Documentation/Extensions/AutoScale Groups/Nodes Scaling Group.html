<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nodes Scaling Groups Extension :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="Nodes%20Scaling%20Group.html">Nodes Scaling Groups Extension</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Extensions/AutoScale%20Groups/Nodes%20Scaling%20Group.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Nodes Scaling Groups Extension</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This AutoScale extension can be used to scale a Deployment Group up and down across preconfigured SSH nodes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation"><a class="anchor" href="#installation"></a>Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Installation is done by dropping modules into the <code>${PAYARA_HOME}/glassfish/modules</code> directory of your Payara Server
installation. Ensure that you have the three core modules installed, and then download and install the
following two modules.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://nexus.payara.fish/repository/payara-artifacts/fish/payara/extensions/autoscale/groups/nodes/autoscale-groups-nodes-plugin-core/1.0/autoscale-groups-core-1.0.jar">Nodes Scaling Groups Core 1.0</a></p>
</li>
<li>
<p><a href="https://nexus.payara.fish/repository/payara-artifacts/fish/payara/extensions/autoscale/groups/nodes/autoscale-groups-nodes-plugin-console/1.0/autoscale-groups-console-1.0.jar">Nodes Scaling Groups Admin Console Plugin 1.0</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nodes-scaling-group-configuration"><a class="anchor" href="#nodes-scaling-group-configuration"></a>Nodes Scaling Group Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A nodes scaling group can be configured either via the command line or the Admin Console.</p>
</div>
<div class="sect2">
<h3 id="command-line"><a class="anchor" href="#command-line"></a>Command Line</h3>
<div class="paragraph">
<p>The <code>set-nodes-scaling-group-configuration</code> command accepts the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>--deploymentgroup</code> - The Deployment Group that the scaling group should be attached to.</p>
</li>
<li>
<p><code>--config</code> - The config that instances created via the <code>scale-up</code> command will use.</p>
</li>
<li>
<p><code>--nodes</code> - List of comma-separated nodes that the scaling group will add or remove instances to.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The primary parameter of the command is the name of the scaling group you wish to configure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">set-nodes-scaling-group-configuration --deploymentgroup group1 --config group1-config --nodes "localhost-domain1,node1,node2" scale1</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the name of the scaling group you wish to configure is unknown, you can use the <code>list-scaling-groups</code> command to
retrieve all scaling groups, or the <code>get-deployment-group-scaling-group</code> to get the name of the scaling group attached
to a deployment group.</p>
</div>
<div class="paragraph">
<p>The <code>list-scaling-group</code> command accepts no parameters.
The <code>get-deployment-group-scaling-group</code> command accepts one parameter: the name of the deployment group to query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">get-deployment-group-scaling-group group1</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="admin-console"><a class="anchor" href="#admin-console"></a>Admin Console</h3>
<div class="paragraph">
<p>From <em>Deployment Groups</em>, select the deployment group that you wish to add a nodes scaling group for
and click on the <em>AutoScale</em> tab. This will display the active AutoScale group for the deployment
group.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/active-nodes-scaling-group.png" alt="Active AutoScale Group in the Admin Console"></span></p>
</div>
<div class="paragraph">
<p>From here, click on <em>Nodes AutoScale Groups</em>, to view the current configured nodes scaling groups.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/list-nodes-scaling-groups.png" alt="List Nodes Scaling Groups in Admin Console"></span></p>
</div>
<div class="paragraph">
<p>Click on the name of the nodes scaling group that you&#8217;d like to configure, enter the details, and hit <em>Save</em>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/edit-nodes-scaling-group.png" alt="Edit Nodes Scaling Group in Admin Console"></span></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usage"><a class="anchor" href="#usage"></a>Usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="create-scaling-group"><a class="anchor" href="#create-scaling-group"></a>Creating a Nodes Scaling Group</h3>
<div class="paragraph">
<p>Creating a scaling group can be done via admin commands or from the admin console.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>Each nodes scaling group must be attached to a deployment group, and said deployment group must not have
any other scaling group attached to it.</p>
</li>
<li>
<p>Each nodes scaling group requires a config which isn&#8217;t the default or server config.</p>
</li>
<li>
<p>Each nodes scaling group requires at least one SSH node.</p>
<div class="ulist">
<ul>
<li>
<p>The default DAS node, <code>localhost-domain1</code> can also be used.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Each nodes scaling group must have a unique name.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_admin_command"><a class="anchor" href="#_admin_command"></a>Admin Command</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">create-nodes-scaling-group --deploymentgroup group1 --config group1-config --nodes "localhost-domain1,node1,node2" nodes-scaler-1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_admin_console"><a class="anchor" href="#_admin_console"></a>Admin Console</h4>
<div class="paragraph">
<p>From <em>Deployment Groups</em>, select the deployment group that you wish to add a nodes scaling group for and click on the <em>AutoScale</em> tab. This will display the active AutoScale group for the deployment group (currently none).</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/active-autoscale-group-empty.png" alt="Active AutoScale Group in the Admin Console"></span></p>
</div>
<div class="paragraph">
<p>From here, click on <em>Nodes AutoScale Groups</em>, to view the current configured nodes scaling groups.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/list-nodes-scaling-groups-empty.png" alt="List Nodes Scaling Groups in Admin Console"></span></p>
</div>
<div class="paragraph">
<p>Click on the <em>New</em> button, and enter your desired details before hitting <em>OK</em>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/new-nodes-scaling-group.png" alt="New Nodes Scaling Groups in Admin Console"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scaling-up"><a class="anchor" href="#scaling-up"></a>Scaling Up</h3>
<div class="paragraph">
<p>A Nodes Scaling Group attempts to balance the instances across the configured nodes, but currently takes no other criteria for determining where the instances should be created.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Scaling up is by default limited to between 1 and 100 instances per command. The upper limit can be changed by modifying the <code>fish.payara.autoscale.maxscale</code> system property in the <code>server-config</code>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_admin_command_2"><a class="anchor" href="#_admin_command_2"></a>Admin Command</h4>
<div class="paragraph">
<p>The <code>scale-up</code> command accepts a <code>--quantity</code> parameter, and is executed against your chosen <em>Deployment Group</em> (<strong>NOT</strong> the scaling group).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">scale-up --quantity 3 group1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_admin_console_2"><a class="anchor" href="#_admin_console_2"></a>Admin Console</h4>
<div class="paragraph">
<p>From <em>Deployment Groups</em>, select the deployment group that you wish to scale and click on the <em>AutoScale</em> tab. This will display the active AutoScale group for the deployment group.</p>
</div>
<div class="paragraph">
<p>Enter a quantity for how much you&#8217;d like to scale the deployment group up by, and click the <em>Scale Up</em> button.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/active-nodes-scaling-group.png" alt="Active AutoScale Group in the Admin Console"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scaling-down"><a class="anchor" href="#scaling-down"></a>Scaling Down</h3>
<div class="paragraph">
<p>A Nodes Scaling Group attempts to balance the instances across the configured nodes, but currently takes no other criteria for determining which instances should be stopped and removed.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Scaling down is by default limited to between 1 and 100 instances per command. The upper limit can be changed by specifying the <code>fish.payara.autoscale.maxscale</code> system property in the <code>server-config</code>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_admin_command_3"><a class="anchor" href="#_admin_command_3"></a>Admin Command</h4>
<div class="paragraph">
<p>The <code>scale-down</code> command accepts a <code>--quantity</code> parameter, and is executed against your chosen <em>Deployment Group</em> (<strong>not</strong> the scaling group).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">scale-down --quantity 3 group1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_admin_console_3"><a class="anchor" href="#_admin_console_3"></a>Admin Console</h4>
<div class="paragraph">
<p>From <em>Deployment Groups</em>, select the deployment group that you wish to scale and click on the <em>AutoScale</em> tab.
This will display the active AutoScale group for the deployment group.</p>
</div>
<div class="paragraph">
<p>Enter a quantity for how much you&#8217;d like to scale the deployment group down by, and click the <em>Scale Down</em> button.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/active-nodes-scaling-group.png" alt="Active AutoScale Group in the Admin Console"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deleting-scaling-group"><a class="anchor" href="#deleting-scaling-group"></a>Deleting a Nodes Scaling Group</h3>
<div class="paragraph">
<p>Creating a scaling group can be done via admin commands or from the admin console.</p>
</div>
<div class="sect3">
<h4 id="_admin_command_4"><a class="anchor" href="#_admin_command_4"></a>Admin Command</h4>
<div class="paragraph">
<p>The <code>delete-scaling-group</code> command can be used to delete any AutoScale group from Payara Server. It accepts one parameter: the name of the scaling group you wish to delete.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">delete-scaling-group nodes-scaler-1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_admin_console_4"><a class="anchor" href="#_admin_console_4"></a>Admin Console</h4>
<div class="paragraph">
<p>From <em>Deployment Groups</em>, select the deployment group that you wish to delete a nodes scaling group for and click on the <em>AutoScale</em> tab. This will display the active AutoScale group for the deployment group.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/active-nodes-scaling-group.png" alt="Active AutoScale Group in the Admin Console"></span></p>
</div>
<div class="paragraph">
<p>From here, click on <em>Nodes AutoScale Groups</em>, to view the current configured nodes scaling groups.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/list-nodes-scaling-groups.png" alt="List Nodes Scaling Groups in Admin Console"></span></p>
</div>
<div class="paragraph">
<p>Check the box of the nodes scaling group that you&#8217;d like to delete, and hit <em>Delete</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listing-scaling-groups"><a class="anchor" href="#listing-scaling-groups"></a>Listing Nodes Scaling Groups</h3>
<div class="paragraph">
<p>Listing all node scaling groups can be done via the admin console, or you can list all scaling groups
(not necessarily nodes scaling groups) using admin commands.</p>
</div>
<div class="sect3">
<h4 id="_admin_command_5"><a class="anchor" href="#_admin_command_5"></a>Admin Command</h4>
<div class="paragraph">
<p>The <code>list-scaling-groups</code> command can be used to list all scaling groups (not necessarily just nodes scaling groups).
The command accepts no parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">list-scaling-groups</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_admin_console_5"><a class="anchor" href="#_admin_console_5"></a>Admin Console</h4>
<div class="paragraph">
<p>From <em>Deployment Groups</em>, select any deployment group and click on the <em>AutoScale</em> tab.
This will display the active AutoScale group for the deployment group.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/active-nodes-scaling-group.png" alt="Active AutoScale Group in the Admin Console"></span></p>
</div>
<div class="paragraph">
<p>From here, click on <em>Nodes AutoScale Groups</em>, to view the current configured nodes scaling groups.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/autoscale/nodes/list-nodes-scaling-groups.png" alt="List Nodes Scaling Groups in Admin Console"></span></p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
