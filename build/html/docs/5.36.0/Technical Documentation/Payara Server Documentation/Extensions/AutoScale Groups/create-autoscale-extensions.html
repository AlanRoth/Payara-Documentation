<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating A New AutoScale Extension :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="create-autoscale-extensions.html">Creating A New AutoScale Extension</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/ondro-poc/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Extensions/AutoScale%20Groups/create-autoscale-extensions.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Creating A New AutoScale Extension</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>To create a new AutoScale extension, it&#8217;s recommended that you use one of the existing extensions as a base. Extensions
are expected to be split into an implementation module and an admin console plugin, and utilise the various interfaces,
abstract classes, and utility methods found within the three core modules (<em>autoscale-groups-api</em>,
<em>autoscale-groups-core</em>, and <em>autoscale-groups-console</em>).</p>
</div>
<div class="paragraph">
<p>It&#8217;s recommended that you place your two implementation modules under a parent aggregator module, similar as to how
was done here with the
<a href="https://github.com/payara/AutoScale-Groups/tree/master/autoscale-groups-nodes-plugin">autoscale-groups-nodes-plugin</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_implementation_module"><a class="anchor" href="#_the_implementation_module"></a>The Implementation Module</h3>
<div class="paragraph">
<p>The implementation module is where the admin commands, services, and config bean interfaces should exist. The following
is expected as a minimum:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A ConfigBean extension for <code>ScalingGroup</code> - This ConfigBean is the "type" of AutoScale Group, and as such should
contain any extension specific attributes and elements. It is expected to follow the naming format of
<code>${type}ScalingGroup</code> (e.g. <em><strong>Nodes</strong>ScalingGroup</em>).</p>
</li>
<li>
<p>A service extension for <code>Scaler</code> - This service should implement the <code>scaleUp</code> and <code>scaleDown</code> methods, and should be
qualified with the <code>ScalerFor</code> annotation pointing at your <code>ScalingGroup</code> ConfigBean.</p>
</li>
<li>
<p>Create command - An admin command used to create a scaling group of your extension&#8217;s type. This command
is expected to be in the format of <code>create-${ScalingGroupExtensionName}</code>, and to have a REST endpoint under
its own config bean (e.g. the <code>create-nodes-scaling-group</code> command has a REST endpoint under the
<code>NodesScalingGroup</code> config bean).</p>
</li>
<li>
<p>Get command - An admin command used to get the configuration of a scaling group of your extension&#8217;s type. This command
is expected to be in the format of <code>get-${ScalingGroupExtensionName}-configuration</code>, and to have a REST endpoint under
its own config bean (e.g. the <code>get-nodes-scaling-group-configuration</code> command has a REST endpoint under the
<code>NodesScalingGroup</code> config bean).</p>
</li>
<li>
<p>Set command - An admin command used to set the configuration of a scaling group of your extension&#8217;s type. This command
is expected to be in the format of <code>set-${ScalingGroupExtensionName}-configuration</code>, and to have a REST endpoint under
its own config bean (e.g. the <code>set-nodes-scaling-group-configuration</code> command has a REST endpoint under the
<code>NodesScalingGroup</code> config bean).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_admin_console_plugin"><a class="anchor" href="#_the_admin_console_plugin"></a>The Admin Console Plugin</h3>
<div class="paragraph">
<p>The admin console plugin is where you add your tabs and pages for listing, creating, deleting, and editing AutoScale
groups of your extension&#8217;s type. The "base" admin console plugin provides a tab group integration point that you can add
your extension tabs to named <code>fish.payara.admingui.extensions:autoScaleGroupsTab</code> (done via your extension&#8217;s
<code>console-config.xml</code> file).</p>
</div>
</div>
<div class="sect1">
<h2 id="_developer_documentation"><a class="anchor" href="#_developer_documentation"></a>Developer Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AutoScale is split into a number of separate modules, but can be summarised into:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An API module</p>
</li>
<li>
<p>Two Core modules (base implementation module and a base Admin Console Plugin)</p>
</li>
<li>
<p>Extension modules</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_api_module"><a class="anchor" href="#_the_api_module"></a>The API Module</h3>
<div class="paragraph">
<p>This module contains the interfaces and abstract classes intended for use or extension within Payara Server and any
extensions. More specifically, it contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The "group" <code>ScalingGroups</code> ConfigBean interface (representing the domain.xml elements and attributes) - this
contains the list of all configured scaling groups</p>
</li>
<li>
<p>The "base" <code>ScalingGroup</code> ConfigBean interface - This is the ConfigBean interface any extension ConfigBean interfaces
should extend from to create their own scaling group type.</p>
</li>
<li>
<p>The <code>Scaler</code> abstract class contract - This is the abstract class extensions should create an implementation service
for. This service is used to perform the <code>scaleUp</code> and <code>scaleDown</code> operations.</p>
</li>
<li>
<p>The <code>ScaleFor</code> qualifier - This qualifier is used to link a <code>Scaler</code> service to a specific <code>ScalingGroup</code>, there is
only ever meant to be one <code>Scaler</code> service for each <code>ScalingGroup</code> extension.</p>
</li>
<li>
<p>Abstract classes for creating the get, set, and create Admin Commands from.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This module is expected to be included in the server, regardless of what extension you choose to use.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_core_modules"><a class="anchor" href="#_the_core_modules"></a>The Core Modules</h3>
<div class="paragraph">
<p>There are currently two core modules: a base implementation module, and a base Admin Console plugin.</p>
</div>
<div class="paragraph">
<p>Both of these modules are expected to be included in the server, regardless of what extension you choose to use.</p>
</div>
<div class="sect3">
<h4 id="_the_base_implementation_module"><a class="anchor" href="#_the_base_implementation_module"></a>The Base Implementation Module</h4>
<div class="paragraph">
<p>This module contains generic admin commands and util classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>scale-up</code> and <code>scale-down</code> admin commands - this command looks up the <code>Scaler</code> service for the <code>ScalingGroup</code>
type attached to the Deployment Group to be scaled, and from it scales the Deployment Group up or down the requested
amount.</p>
</li>
<li>
<p>The <code>delete-scaling-group</code> command is a generic command for deleting scaling groups - extensions do not need to
provide their own delete commands unless you wish additional actions to be taken.</p>
</li>
<li>
<p>The <code>list-scaling-groups</code> command lists all configured scaling groups.</p>
</li>
<li>
<p>The <code>get-deployment-group-scaling-group</code> command returns the <code>ScalingGroup</code> attached to the provided Deployment Group</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_the_base_admin_console_plugin"><a class="anchor" href="#_the_base_admin_console_plugin"></a>The Base Admin Console Plugin</h4>
<div class="paragraph">
<p>This module contains common handler methods, the tab group that admin console plugin extensions should attach to, and
a generic "Active AutoScale Group" page from which a user can see which AutoScale group is attached to a specific
Deployment Group and scale it up or down.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_extension_modules"><a class="anchor" href="#_extension_modules"></a>Extension Modules</h3>
<div class="paragraph">
<p>Extension modules are the implementations that provide the ability for Payara Server to scale across different
environments. They consist of an implementation module and an admin console plugin. The implementation module provides
the config beans, services, and admin commands for creating, configuring, and using an AutoScale group, while the admin
console plugin contains the pages and tabs for doing the same from the admin console.</p>
</div>
<div class="paragraph">
<p>Greater detail of what each module contains can be found above in the <em>Creating A New AutoScale Extension</em> section.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
