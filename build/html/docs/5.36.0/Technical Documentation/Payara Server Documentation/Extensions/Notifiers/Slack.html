<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Slack Notifier :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="Slack.html">Slack Notifier</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Extensions/Notifiers/Slack.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Slack Notifier</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://slack.com/">Slack</a> is a functional enterprise chat and team collaboration tool inspired by IRC. It allows an organisation to create specific <strong>domains</strong> and discuss work topics or subjects in separate <strong>channels</strong> that can either be public or private.</p>
</div>
<div class="paragraph">
<p>Payara Server Enterprise includes a special notifier to send notifications from the Notification service to an organisation&#8217;s domain channel using Slack API integrations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="downloads"><a class="anchor" href="#downloads"></a>Downloads</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://nexus.payara.fish/repository/payara-artifacts/fish/payara/extensions/notifiers/slack-notifier-core/1.0/slack-notifier-core-1.0.jar">Slack Notifier Core 1.0</a></p>
</li>
<li>
<p><a href="https://nexus.payara.fish/repository/payara-artifacts/fish/payara/extensions/notifiers/slack-notifier-console-plugin/1.0/slack-notifier-console-plugin-1.0.jar">Slack Notifier Console Plugin 1.0</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="slack-integration-configuration"><a class="anchor" href="#slack-integration-configuration"></a>Slack Integration Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to allow the notification service to log events on a Slack channel of your choice, you must fulfill the following requirements first:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Have created a Slack account within your organisation&#8217;s domain (for example <code>payara.slack.com</code>)</p>
</li>
<li>
<p>Have an Slack account with granted permissions to create channels and configure API integrations.</p>
</li>
<li>
<p>Have created a Slack channel which will be used by the Notification Service to report notification events.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once you have completed these requirements, you can configure an <a href="https://api.slack.com/incoming-webhooks">Incoming Webhook integration</a> for the channel. An <em>Incoming Webhook</em> is the simplest integration mechanism that Slack provides, in that they make use of normal HTTP requests with a <em>JSON</em> payload that includes the message text and additional options to format incoming messages to the channel.</p>
</div>
<div class="sect2">
<h3 id="configure-incoming-webhook"><a class="anchor" href="#configure-incoming-webhook"></a>Configure Incoming WebHook</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, access the developer portal&#8217;s application directory located at <a href="https://payara.slack.com/apps" class="bare">https://payara.slack.com/apps</a>. Then, in the search box type <strong>Incoming Webhooks</strong>. A suggestion will appear in the results display:</p>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/notification-service/slack/application-portal.png" alt="Slack Application Portal"></span></p>
</div>
</li>
<li>
<p>Now, proceed to select the channel that the WebHook will use to direct the notification events to:</p>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/notification-service/slack/channel-selection.png" alt="Incoming WebHook Channel Selection"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It&#8217;s recommended to choose a <em>private</em> channel, since it will keep these notifications events protected in case of unwanted disclosure and it won&#8217;t spam other users of your organisation with unwanted notifications
</td>
</tr>
</table>
</div>
</li>
<li>
<p>With this, the WebHook configuration is finished. Now, take special attention to the WebHook URL, which is usually follows this structure:</p>
<div class="paragraph">
<p><code><a href="https://hooks.slack.com/services/{TOKEN1}/{TOKEN2}/{TOKEN3}" class="bare">https://hooks.slack.com/services/{TOKEN1}/{TOKEN2}/{TOKEN3}</a></code></p>
</div>
<div class="paragraph">
<p>Like in the following sample:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/notification-service/slack/webhook-url.png" alt="WebHook URL Sample"></span></p>
</div>
<div class="paragraph">
<p>We will use these 3 tokens when configuring the server&#8217;s integration later.</p>
</div>
<div class="paragraph">
<p>We recommend that you configure the following settings in the channel integration to give better visualization for your notifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Descriptive Label</strong>: Use a name that&#8217;s easy to understand to identify this WebHook integration</p>
</li>
<li>
<p><strong>Customize Name</strong>: Insert a name for the "agent" that will report the notification messages</p>
</li>
<li>
<p><strong>Customize Icon</strong>: Insert a custom icon to identify the agent that will be visualized in the messages. We recommend using one of the Payara logos like in this sample:</p>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/notification-service/slack/webhook-additional-settings.png" alt="WebHook Additional Settings"></span></p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="payara-server-configuration"><a class="anchor" href="#payara-server-configuration"></a>Payara Server Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the Incoming WebHook properly configured, now it&#8217;s time to setup the Notification Service in the domain configuration.</p>
</div>
<div class="sect2">
<h3 id="using-the-admin-console"><a class="anchor" href="#using-the-admin-console"></a>Using the Admin Console</h3>
<div class="paragraph">
<p>To configure the Notification Service in the Administration Console, go  to <em>Configuration &#8594; [instance-configuration (like server-config)] &#8594;
Notification Service</em> and click on the <strong>Slack</strong> tab:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/notification-service/slack/admin-console-configuration.png" alt="Slack Configuration on Admin Console"></span></p>
</div>
<div class="paragraph">
<p>Check the <strong>Enabled</strong> box (and the <strong>Dynamic</strong> box too if you don&#8217;t want to restart the domain) and input the three tokens highlighted in the previous section. Hit the <strong>Save</strong> button to preserve the changes.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-asadmin-cli"><a class="anchor" href="#using-asadmin-cli"></a>Using the Asadmin CLI</h3>
<div class="paragraph">
<p>To configure the Notification Service from the command line, use the <code>set-slack-notifier-configuration</code> asadmin command, specifying the tokens
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; set-slack-notifier-configuration --enabled=true --dynamic=true --token1=T43CHENUC --token2=B441EFQB1 --token3=Jas8P3jCZ4wK8Y2m88dCxGkn</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the <code>--enabled</code> and <code>--dynamic</code> options to enable or disable the Slack notifier on demand.</p>
</div>
<div class="paragraph">
<p>Also, you can retrieve the current configuration for the Slack notifier using the <code>get-slack-notifier-configuration</code> asadmin command like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin &gt; get-slack-notifier-configuration

Enabled  Noisy  Token 1    Token 2    Token 3
true     false  T43CHENUC  B441EFQB1  Jas8P3jCZ4wK8Y2m88dCxGkn</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you have correctly configured the Slack notifier, it can be used to push notifications to your configured channel. If you do not see any notification event messages, check the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is the Slack notifier enabled?</p>
</li>
<li>
<p>Is the Notification Service itself enabled?</p>
</li>
<li>
<p>Is there a service configured to use the notifier? (e.g. the HealthCheck service)</p>
</li>
<li>
<p>Is the service configured to send notifications frequently enough to observe?</p>
</li>
<li>
<p>Have you enabled the service after configuring it?</p>
</li>
<li>
<p>Is the <strong>Incoming WebHook</strong> correctly configured in the Slack API portal?</p>
</li>
<li>
<p>Check that you have not surpassed the current <a href="https://api.slack.com/docs/rate-limits">rate limit for the Slack API</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s a sample of how the notifications are visualized on the Slack Desktop application:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/notification-service/slack/notifications-sample.png" alt="Slack Notifications Sample"></span></p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
