<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Request Tracing Service :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="request-tracing-service.html">Request Tracing Service</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Logging%20and%20Monitoring/Request%20Tracing%20Service/request-tracing-service.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Request Tracing Service</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Request Tracing Service provides tracing facilities for multiple protocols
and process communications done by the components of deployed applications.</p>
</div>
<div class="paragraph">
<p>The service helps users to detect application slowness and performance degradation
by logging requests that exceed a given threshold. The trace data from
long-running requests gives insight to solving bottlenecks and other performance
issues.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The service is available in both Payara Server and Payara Micro, though the
service configuration is different in Payara Micro.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following types of requests are traced if the service is enabled:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JAX-RS endpoints</p>
</li>
<li>
<p>JAX-RS client calls</p>
</li>
<li>
<p>MicroProfile REST Client calls</p>
</li>
<li>
<p>Servlets (HTTP requests)</p>
</li>
<li>
<p>SOAP Web Services</p>
</li>
<li>
<p>WebSockets</p>
</li>
<li>
<p>EJB timers execution</p>
</li>
<li>
<p>Inbound JMS messages received by an MDB</p>
</li>
<li>
<p>JBatch jobs creation</p>
</li>
<li>
<p>Tasks executed by injected Managed Executors.</p>
</li>
<li>
<p>Remote Invocations of EJBs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In Payara Server and Payara Micro 5.181, the Request Tracing Service was given an overhaul - traces are now in an OpenTracing-style format using Spans, instead of the original event stream format. Practically, this means that instead of having an ordered sequence of time stamped events constituting a trace (with separate entered and exited events), you now have a set of related traces (now called spans) with individual durations and attributes.</p>
</div>
<div class="paragraph">
<p>The OpenTracing specification, found <a href="https://github.com/opentracing/specification/blob/master/specification.md">here</a>, gives a more detailed description of what Spans are and the general trace format.
Alternatively you can view a short summary <a href="#documentation/payara-server/request-tracing-service/terminology.adoc" class="page unresolved">here</a>.</p>
</div>
<div class="paragraph">
<p>The Request Tracing overhaul also brought in the concept of sample rates, affording you extra options to limit the amount of tracing done. In Payara 5.181, there are two offerings: flat probability, and an adaptive solution. The flat probability sampling simply applies a percentage chance that a trace will not be traced. The adaptive solution allows you to configure a target number of traces to sample over a given time period (e.g. sample 6 traces every 10 minutes).</p>
</div>
<div class="paragraph">
<p>We also offer an option to perform this sampling before or after the threshold checks, allowing you to either determine if a trace should be sampled at its inception, or only after determining that a trace has breached your configured thresholds respectively.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opentracing_support"><a class="anchor" href="#_opentracing_support"></a>OpenTracing Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Since <strong>4.1.2.182</strong>; <strong>5.182</strong>&nbsp;</em></p>
</div>
<div class="paragraph">
<p>In-line with our support for <a href="#/documentation/microprofile/opentracing.adoc" class="page unresolved">MicroProfile OpenTracing</a>, Payara Server &amp; Micro have support for <a href="http://opentracing.io/">OpenTracing.io</a> code instrumentation.</p>
</div>
<div class="paragraph">
<p>In a practical sense, this means that you can instrument your code using either the new <code>@Traced</code> annotation, or by injecting and using an OpenTracing Tracer via CDI. For full details, see the <a href="#/documentation/microprofile/opentracing.adoc" class="page unresolved">MicroProfile OpenTracing</a> and <a href="https://opentracing.io/docs/">OpenTracing.io</a> documentation. The <a href="https://github.com/opentracing/opentracing-java/blob/release-0.30.0/Overview.md">OpenTracing Java GitHub</a> page also has some useful information about using the OpenTracing API.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The new MicroProfile <code>@Traced</code> annotation replaces the Payara Server &amp; Micro specific annotation provided previously, which will require you to either remove or refactor any code instrumented with the old annotation. The new annotation&#8217;s canonical name is <code>org.eclipse.microprofile.opentracing.Traced</code>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_api_version_implemented"><a class="anchor" href="#_api_version_implemented"></a>API Version Implemented</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Payara Server &amp; Micro Version</th>
<th class="tableblock halign-left valign-top">OpenTracing.io API Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.1.2.183 - 4.1.2.191; 5.183 - {currentVersion}</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>0.31</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.1.2.182; 5.182</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>0.30</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_features_not_currently_supported"><a class="anchor" href="#_features_not_currently_supported"></a>Features Not Currently Supported</h3>
<div class="paragraph">
<p>We currently do not offer the following OpenTracing features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Conversion to or from OpenTracing 0.31 or newer API</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
