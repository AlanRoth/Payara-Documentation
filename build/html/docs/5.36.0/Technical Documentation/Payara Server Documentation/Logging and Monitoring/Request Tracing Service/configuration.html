<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Request Tracing Configuration :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../index.html">docs</a></li>
    <li><a href="configuration.html">Request Tracing Configuration</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/Payara-Documentation/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Logging%20and%20Monitoring/Request%20Tracing%20Service/configuration.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Request Tracing Configuration</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As with any other services available in Payara Server Community, the Request tracing service
can be configured by using the web console, administration commands or editing
the <em>domain.xml</em> configuration file directly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-the-web-console"><a class="anchor" href="#using-the-web-console"></a>Using the Web Administration Console</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To configure the Request Tracing Service in the Administration Console, go to
<em>Configuration &#8594; [instance-configuration (like server-config)] &#8594; Request Tracing</em>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/request-tracing/configuration-admin-console.png" alt="Request Tracing Configuration in the Admin Console"></span></p>
</div>
<div class="paragraph">
<p>Check the <strong>Enabled</strong> box (and the <strong>Dynamic</strong> box too if you don&#8217;t want to
restart the domain) to switch the request tracing service on.</p>
</div>
<div class="paragraph">
<p>You can configure the request tracing service settings using the following
attributes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Sample Rate</strong></dt>
<dd>
<p>This defines the percentage chance of a trace being sampled (as in, not discarded).
This accepts a value between 0 and 1, with a value of 1 meaning 100% of traces are sampled.</p>
</dd>
<dt class="hdlist1"><strong>Adaptive Sampling</strong></dt>
<dd>
<p>This option is an alternative to using Sample Rate, allowing the sample rate to change in
accordance with how many traces are being sampled over a period of time.</p>
</dd>
<dt class="hdlist1"><strong>Target Count</strong></dt>
<dd>
<p>This defines the number of sampled traces that the adaptive sampling shall attempt to hit over a period of time.</p>
</dd>
<dt class="hdlist1"><strong>Time Value</strong></dt>
<dd>
<p>This defines the period of time that the adaptive sampling will try to hit the <em>Target Count</em> in.</p>
</dd>
<dt class="hdlist1"><strong>Time Unit</strong></dt>
<dd>
<p>This defines the time unit of the <em>Time Value</em> attribute.</p>
</dd>
<dt class="hdlist1"><strong>Applications Only</strong></dt>
<dd>
<p>When enabled, traces that originate from outside of deployed applications
(e.g. the Admin Console) will not be sampled.</p>
</dd>
<dt class="hdlist1"><strong>Threshold Value</strong></dt>
<dd>
<p>This defines the number of units beyond which a request will be traced.</p>
</dd>
<dt class="hdlist1"><strong>Threshold Unit</strong></dt>
<dd>
<p>This defines the time duration per unit. The accepted options are any valid
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html">java.util.concurrent.TimeUnit</a> values.
The default value is <em>SECONDS</em>.</p>
</dd>
<dt class="hdlist1"><strong>Sample Rate First</strong></dt>
<dd>
<p>When enabled, the sample rate will be checked as a trace begins, meaning that traces that
would have broken the thresholds are potentially discarded. When disabled, the sample rate is checked after a trace has
completed, meaning that you&#8217;re only sampling traces that have breached your threshold values. Having this disabled will
potentially give more accurate trace data, at the expense of a small extra performance overhead.</p>
</dd>
<dt class="hdlist1"><strong>Reservoir Sampling</strong></dt>
<dd>
<p>When disabled, the trace stores will contain the longest request traces. When enabled, the
chance of any sampled request being in the trace stores becomes constant. Note that this applies to both trace stores -
in most circumstances it doesn&#8217;t make sense to have this enabled if <em>Store Historic Traces</em> is also enabled.</p>
</dd>
<dt class="hdlist1"><strong>Trace Store Size</strong></dt>
<dd>
<p>The maximum number of traces to be stored in the local rolling trace store. A store shared in a cluster uses the maximum setting of this property of any instance in the cluster with request tracing enabled.</p>
</dd>
<dt class="hdlist1"><strong>Trace Store Timeout</strong></dt>
<dd>
<p>The timeout value for when traces will be removed from the rolling trace store. This is
ignored when reservoir sampling is enabled.</p>
</dd>
<dt class="hdlist1"><strong>Store Historic Traces</strong></dt>
<dd>
<p>When enabled, a second trace store is created to store the longest historical request traces.</p>
</dd>
<dt class="hdlist1"><strong>Historic Trace Store Size</strong></dt>
<dd>
<p>Determines the number of historical trace events that can be stored in memory when
historical storing is enabled. The default value is <strong>20</strong> records. A store shared in a cluster uses the maximum setting of this property of any instance in the cluster with request tracing enabled.</p>
</dd>
<dt class="hdlist1"><strong>Historic Trace Store Timeout</strong></dt>
<dd>
<p>Determines how long before Request Tracing messages are removed. This field is
specified in the format "%d %h %m %s" where % is an integer. Any of the units can also be omitted.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Aside from this configuration settings, you can also define which notifiers will be
used to relay the request tracing events by moving them to the <strong>Selected Notifiers</strong>
box.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../../_images/request-tracing/select-notifiers.png" alt="Activate Notifiers in the Admin Console"></span></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Keep in mind that for request tracing events to be relayed to the
selected notifiers, both the
<a href="#/documentation/payara-server/notification-service/notification-service.adoc" class="page unresolved">Notification Service</a>
and each respective notifier must be enabled first.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You don&#8217;t need to manually add each notifier on this screen. When enabling
a notifier on its configuration screen, the server will <strong>automatically</strong> add it to the list
of selected notifiers for the Request Tracing service. This same result occurs when
enabling the notifier using the appropriate <em>asadmin</em> command.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="from-the-command-line"><a class="anchor" href="#from-the-command-line"></a>From the Command Line</h3>
<div class="paragraph">
<p>You can configure the Request Tracing Service by using the administrations commands
documented on the <a href="#documentation/payara-server/request-tracing-service/asadmin-commands.adoc" class="page unresolved">corresponding section</a></p>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
