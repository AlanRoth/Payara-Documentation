<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rest Monitoring :: Payara Documentation Preview</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
    <meta name="docsearch:version" content="5.36.0" />
  </head>
  <body class="article">
  <header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../../..">Payara Documentation Preview</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item hide-for-print">
        Version: <div class="page-versions">
  <button class="version-menu-toggle single-version" title="Current version">5.36.0</button>
</div>

      </div>
      <div class="navbar-item hide-for-print">
            <div id="search-input-container">
    </div>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://www.payara.fish/products/downloads/">Download</a>
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary enterprise" href="../../../../../../../../enterprise">Documentation for Payara Enterprise</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.36.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">5.36.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../../index.html">5.36.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../../index.html">docs</a></li>
    <li><a href="Rest%20Monitoring.html">Rest Monitoring</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/alanroth/Workspace/ondro-poc/docs/modules/ROOT/pages/Technical%20Documentation/Payara%20Server%20Documentation/Logging%20and%20Monitoring/Monitoring%20Service/REST%20Monitoring/Rest%20Monitoring.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Rest Monitoring</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The REST monitoring implements a Jolokia type functionality in Payara Server.</p>
</div>
<div class="paragraph">
<p>It exposes MBeans over HTTP with a REST API to stop JMX monitoring requiring RMI. The REST monitoring is hosted on the admin-listener (port 4848).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-monitoring-configuration"><a class="anchor" href="#rest-monitoring-configuration"></a>Configuring REST monitoring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST monitoring is configurable through several asadmin commands.</p>
</div>
<div class="sect2">
<h3 id="setting-rest-configuration"><a class="anchor" href="#setting-rest-configuration"></a>Setting REST monitoring Configuration</h3>
<div class="paragraph">
<p>The <code>set-rest-monitoring-configuration</code> asadmin command is used to configure REST monitoring. This command requires the server to be running. Each configuration property can be configured individually or all together.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; set-rest-monitoring-configuration --enabled true --target ${config name} --contextRoot ${contextRoot} --name ${RESTMonitoringApplicationName} --securityEnabled true</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The config whose values will be set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server-config</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not the service is enabled for the selected config.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--contextRoot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The context root of the REST Monitoring application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/rest-monitoring</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the REST Monitoring application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>__restmonitoring</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--securityEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not secure access to the REST Monitoring application is enabled.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="rest-monitoring-security"><a class="anchor" href="#rest-monitoring-security"></a>Rest Monitoring Security</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This requires secure admin to be enabled.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; set-rest-monitoring-configuration --securityenabled=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>securityenabled</code> property defines whether the REST monitoring application is available over HTTPS. Since the REST monitoring application is hosted on the <code>admin-listener</code>.</p>
</div>
<div class="paragraph">
<p>Enabling secure admin can be done by first configuring the admin password with the <code>change-admin-password</code> command, then using the <code>enable-secure-admin</code> command. Enabling secure admin requires a server restart.</p>
</div>
<div class="paragraph">
<p>When <code>securityenabled</code> is set to true, a username and password is required to use REST monitoring.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default username is set to <code>payara</code> and the default password is set to <code>rest</code>. The user <code>payara</code> is defined in the <code>file</code> realm.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The password can be changed with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; update-file-user --groups=rest --target=server-config --authrealmname=file payara</code></pre>
</div>
</div>
<div class="paragraph">
<p>This updates the <code>payara</code> user, which is part of the <code>rest</code> group. Any users who are able to log in to the REST monitoring must also be defined in the <code>file</code> realm and be part of the <code>rest</code> group.</p>
</div>
<div class="paragraph">
<p>New users can be created by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; create-file-user --groups=rest --target=server-config --authrealmname=file ${username}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="getting-rest-configuration"><a class="anchor" href="#getting-rest-configuration"></a>Getting REST monitoring Configuration</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; get-rest-monitoring-configuration</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>get-rest-monitoring-configuration</code> asadmin command is used to get the configuration of the REST monitoring. This command requires the server to be running.</p>
</div>
<div class="paragraph">
<p>If no target is specified, the command will get the REST monitoring configuration from the domain configuration <em>(server-config)</em>. The <code>--target</code> option retrieves the REST monitoring from another instance or cluster.</p>
</div>
<div class="sect3">
<h4 id="example-output"><a class="anchor" href="#example-output"></a>Example Asadmin Output</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; get-rest-monitoring-configuration --target server-config

Enabled    Rest Monitoring Application Name    Context Root       Security Enabled
true       __restmonitoring                    /rest-monitoring   false</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rest-command-line-option"><a class="anchor" href="#rest-command-line-option"></a>Command-Line Options</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The config whose REST Monitoring application’s configuration will be retrieved.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server-config</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-monitoring-usage"><a class="anchor" href="#rest-monitoring-usage"></a>Usage</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Only the READ Operations are supported currently
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Common usage examples with REST Monitoring through Asadmin and admin console.</p>
</div>
<div class="sect2">
<h3 id="enabling-security"><a class="anchor" href="#enabling-security"></a>Enabling Security For Use With HTTPS</h3>
<div class="paragraph">
<p>The <code>securityenabled</code> property defines whether the REST monitoring application is available over HTTPS. Since the REST monitoring application is hosted on the admin-listener, this requires secure admin to be enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Enabling secure admin requires a server restart.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="enabling-secure-rest-monitoring"><a class="anchor" href="#enabling-secure-rest-monitoring"></a>Enabling Secure REST Monitoring</h4>
<div class="paragraph">
<p>Once secure admin is enabled, you may enable security for REST Monitoring.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; set-rest-monitoring-configuration --securityenabled=true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="changing-default-password"><a class="anchor" href="#changing-default-password"></a>Changing The Default Password</h4>
<div class="paragraph">
<p>When <code>securityenabled</code> is set to true, a username and password are required to use REST monitoring. By default, the username is set to <code>payara</code> and the password is set to <code>rest</code>. The user <code>payara</code> is defined in the file realm.</p>
</div>
<div class="paragraph">
<p>The password can be changed with the <code>update-file-user`</code> command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; update-file-user --groups=rest --target=server-config --authrealmname=file payara</code></pre>
</div>
</div>
<div class="paragraph">
<p>This updates the <code>payara</code> user, which is part of the rest group. Any users who are able to log in to the REST monitoring must also be defined in the <code>file</code> realm and be part of the <code>rest</code> group.</p>
</div>
</div>
<div class="sect3">
<h4 id="adding-new-users"><a class="anchor" href="#adding-new-users"></a>Adding New Users</h4>
<div class="paragraph">
<p>New users can be added using the <code>create-file-user</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">asadmin&gt; create-file-user --groups=rest --target=server-config --authrealmname=file ${username}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="performing-read-operations"><a class="anchor" href="#performing-read-operations"></a>Performing READ Operations</h3>
<div class="paragraph">
<p>REST Monitoring supports a subset of operations in the Jolokia API.</p>
</div>
<div class="paragraph">
<p>The <code>read</code> operation reads the details of the requested MBean. The <code>read</code> operation accepts GET requests on URLs in the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;REST_API_URL&gt;/read/${mbean-name}/${attribute-name}</pre>
</div>
</div>
<div class="paragraph">
<p>A list of attribute names can be found in the request of an empty attribute name under ‘value’.</p>
</div>
<div class="sect3">
<h4 id="bulk-read-example"><a class="anchor" href="#bulk-read-example"></a>Example Execution</h4>
<div class="paragraph">
<p>To read the MBean <code>java.lang:type=Memory</code> using the default configuration, you would make a GET request to: <code><a href="http://localhost:4848/rest-monitoring/rest/read/java.lang:type=Memory" class="bare">http://localhost:4848/rest-monitoring/rest/read/java.lang:type=Memory</a></code>.</p>
</div>
<div class="paragraph">
<p><strong>Example Output</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "request": {
    "mbean": "java.lang:type=Memory",
    "type": "read"
  },
  "value": {
    "HeapMemoryUsage": {
      "committed": 450363392,
      "init": 264241152,
      "max": 477626368,
      "used": 97480984
    },
    "ObjectPendingFinalizationCount": 0,
    "NonHeapMemoryUsage": {
      "committed": 139460608,
      "init": 2555904,
      "max": -1,
      "used": 122389432
    },
    "Verbose": false,
    "ObjectName": "java.lang:type=Memory"
  },
  "timestamp": 1502799650273,
  "status": 200
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="performing-bulk-read-operations"><a class="anchor" href="#performing-bulk-read-operations"></a>Performing Bulk READ Operations</h3>
<div class="paragraph">
<p>It is possible to execute bulk operations using the REST monitoring API. To do this, issue a POST request to the REST API URL with the following JSON structure as the body payload.</p>
</div>
<div class="sect3">
<h4 id="example-bulk-payload"><a class="anchor" href="#example-bulk-payload"></a>Example Payload</h4>
<div class="paragraph">
<p>The payload is a JSON array consisting of objects of type, MBean, and attribute JSON objects. You may send a single operation request instead of an array also.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "type" : "&lt;OPERATION_TYPE&gt;",
    "mbean" : "&lt;MBEAN_NAME&gt;",
    "attribute" : "&lt;ATTRIBUTE_NAME&gt;"
  },
  {
    "type" : "&lt;OPERATION_TYPE&gt;",
    "mbean" : "&lt;MBEAN_NAME&gt;",
    "attribute" : "&lt;ATTRIBUTE_NAME&gt;"
  }
]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>type</strong> - The ‘type’ of operation to execute, e.g. read, search, write, etc.</p>
</li>
<li>
<p><strong>mbean</strong> - The MBean attribute which the operation will be executed on.</p>
</li>
<li>
<p><strong>attribute</strong> - The MBean attribute upon which the operation will be executed. If omitted, all attributes of the MBean will be involved in the operation.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="example-bulk-execution"><a class="anchor" href="#example-bulk-execution"></a>Example Execution</h4>
<div class="paragraph">
<p>Using <code>curl</code> and a sample REST API URL of <code><a href="http://localhost:4848/rest-monitoring/rest" class="bare">http://localhost:4848/rest-monitoring/rest</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -X POST \
  http://localhost:4848/rest-monitoring/rest/ \
  -H 'Content-Type: application/json' \
  -d '[
	{
		"mbean": "java.lang:type=Compilation",
		"type": "read"
	},{
		"mbean": "java.lang:type=Runtime",
		"attribute" : "Uptime",
		"type": "read"
	}
]'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example Output</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
    {
        "request": {
            "mbean": "java.lang:type=Compilation",
            "type": "read"
        },
        "value": {
            "Name": "HotSpot 64-Bit Tiered Compilers",
            "CompilationTimeMonitoringSupported": true,
            "TotalCompilationTime": 106363,
            "ObjectName": "java.lang:type=Compilation"
        },
        "timestamp": 1529353755633,
        "status": 200
    },
    {
        "request": {
            "mbean": "java.lang:type=Runtime",
            "attribute": "Uptime",
            "type": "read"
        },
        "value": 8541422,
        "timestamp": 1529353755636,
        "status": 200
    }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="#Technical Documentation/Payara Server Documentation/Logging and Monitoring/Monitoring Service/JMX Monitoring Service">JMX Monitoring</a></p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../../../../_/js/site.js"></script>
<script async src="../../../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../../../_/js/vendor/docSearch.js"></script>
  </body>
</html>
